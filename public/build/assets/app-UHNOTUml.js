function di(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ze={exports:{}},Ot,Sr;function fi(){return Sr||(Sr=1,Ot=function(t,n){return function(){for(var a=new Array(arguments.length),c=0;c<a.length;c++)a[c]=arguments[c];return t.apply(n,a)}}),Ot}var Lt,Cr;function Q(){if(Cr)return Lt;Cr=1;var e=fi(),t=Object.prototype.toString;function n(y){return t.call(y)==="[object Array]"}function i(y){return typeof y>"u"}function a(y){return y!==null&&!i(y)&&y.constructor!==null&&!i(y.constructor)&&typeof y.constructor.isBuffer=="function"&&y.constructor.isBuffer(y)}function c(y){return t.call(y)==="[object ArrayBuffer]"}function u(y){return typeof FormData<"u"&&y instanceof FormData}function h(y){var N;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?N=ArrayBuffer.isView(y):N=y&&y.buffer&&y.buffer instanceof ArrayBuffer,N}function d(y){return typeof y=="string"}function p(y){return typeof y=="number"}function _(y){return y!==null&&typeof y=="object"}function v(y){return t.call(y)==="[object Date]"}function S(y){return t.call(y)==="[object File]"}function C(y){return t.call(y)==="[object Blob]"}function x(y){return t.call(y)==="[object Function]"}function k(y){return _(y)&&x(y.pipe)}function g(y){return typeof URLSearchParams<"u"&&y instanceof URLSearchParams}function b(y){return y.replace(/^\s*/,"").replace(/\s*$/,"")}function E(){return typeof navigator<"u"&&(navigator.product==="ReactNative"||navigator.product==="NativeScript"||navigator.product==="NS")?!1:typeof window<"u"&&typeof document<"u"}function A(y,N){if(!(y===null||typeof y>"u"))if(typeof y!="object"&&(y=[y]),n(y))for(var j=0,X=y.length;j<X;j++)N.call(null,y[j],j,y);else for(var z in y)Object.prototype.hasOwnProperty.call(y,z)&&N.call(null,y[z],z,y)}function O(){var y={};function N(z,W){typeof y[W]=="object"&&typeof z=="object"?y[W]=O(y[W],z):y[W]=z}for(var j=0,X=arguments.length;j<X;j++)A(arguments[j],N);return y}function L(){var y={};function N(z,W){typeof y[W]=="object"&&typeof z=="object"?y[W]=L(y[W],z):typeof z=="object"?y[W]=L({},z):y[W]=z}for(var j=0,X=arguments.length;j<X;j++)A(arguments[j],N);return y}function q(y,N,j){return A(N,function(z,W){j&&typeof z=="function"?y[W]=e(z,j):y[W]=z}),y}return Lt={isArray:n,isArrayBuffer:c,isBuffer:a,isFormData:u,isArrayBufferView:h,isString:d,isNumber:p,isObject:_,isUndefined:i,isDate:v,isFile:S,isBlob:C,isFunction:x,isStream:k,isURLSearchParams:g,isStandardBrowserEnv:E,forEach:A,merge:O,deepMerge:L,extend:q,trim:b},Lt}var It,Er;function pi(){if(Er)return It;Er=1;var e=Q();function t(n){return encodeURIComponent(n).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}return It=function(i,a,c){if(!a)return i;var u;if(c)u=c(a);else if(e.isURLSearchParams(a))u=a.toString();else{var h=[];e.forEach(a,function(_,v){_===null||typeof _>"u"||(e.isArray(_)?v=v+"[]":_=[_],e.forEach(_,function(C){e.isDate(C)?C=C.toISOString():e.isObject(C)&&(C=JSON.stringify(C)),h.push(t(v)+"="+t(C))}))}),u=h.join("&")}if(u){var d=i.indexOf("#");d!==-1&&(i=i.slice(0,d)),i+=(i.indexOf("?")===-1?"?":"&")+u}return i},It}var Mt,Tr;function Qa(){if(Tr)return Mt;Tr=1;var e=Q();function t(){this.handlers=[]}return t.prototype.use=function(i,a){return this.handlers.push({fulfilled:i,rejected:a}),this.handlers.length-1},t.prototype.eject=function(i){this.handlers[i]&&(this.handlers[i]=null)},t.prototype.forEach=function(i){e.forEach(this.handlers,function(c){c!==null&&i(c)})},Mt=t,Mt}var Nt,kr;function Ya(){if(kr)return Nt;kr=1;var e=Q();return Nt=function(n,i,a){return e.forEach(a,function(u){n=u(n,i)}),n},Nt}var jt,Ar;function gi(){return Ar||(Ar=1,jt=function(t){return!!(t&&t.__CANCEL__)}),jt}var qt,Rr;function Za(){if(Rr)return qt;Rr=1;var e=Q();return qt=function(n,i){e.forEach(n,function(c,u){u!==i&&u.toUpperCase()===i.toUpperCase()&&(n[i]=c,delete n[u])})},qt}var Dt,Pr;function ec(){return Pr||(Pr=1,Dt=function(t,n,i,a,c){return t.config=n,i&&(t.code=i),t.request=a,t.response=c,t.isAxiosError=!0,t.toJSON=function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:this.config,code:this.code}},t}),Dt}var Bt,Or;function mi(){if(Or)return Bt;Or=1;var e=ec();return Bt=function(n,i,a,c,u){var h=new Error(n);return e(h,i,a,c,u)},Bt}var Ft,Lr;function tc(){if(Lr)return Ft;Lr=1;var e=mi();return Ft=function(n,i,a){var c=a.config.validateStatus;!c||c(a.status)?n(a):i(e("Request failed with status code "+a.status,a.config,null,a.request,a))},Ft}var $t,Ir;function nc(){return Ir||(Ir=1,$t=function(t){return/^([a-z][a-z\d\+\-\.]*:)?\/\//i.test(t)}),$t}var Ut,Mr;function rc(){return Mr||(Mr=1,Ut=function(t,n){return n?t.replace(/\/+$/,"")+"/"+n.replace(/^\/+/,""):t}),Ut}var Ht,Nr;function ic(){if(Nr)return Ht;Nr=1;var e=nc(),t=rc();return Ht=function(i,a){return i&&!e(a)?t(i,a):a},Ht}var zt,jr;function sc(){if(jr)return zt;jr=1;var e=Q(),t=["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"];return zt=function(i){var a={},c,u,h;return i&&e.forEach(i.split(`
`),function(p){if(h=p.indexOf(":"),c=e.trim(p.substr(0,h)).toLowerCase(),u=e.trim(p.substr(h+1)),c){if(a[c]&&t.indexOf(c)>=0)return;c==="set-cookie"?a[c]=(a[c]?a[c]:[]).concat([u]):a[c]=a[c]?a[c]+", "+u:u}}),a},zt}var Wt,qr;function oc(){if(qr)return Wt;qr=1;var e=Q();return Wt=e.isStandardBrowserEnv()?(function(){var n=/(msie|trident)/i.test(navigator.userAgent),i=document.createElement("a"),a;function c(u){var h=u;return n&&(i.setAttribute("href",h),h=i.href),i.setAttribute("href",h),{href:i.href,protocol:i.protocol?i.protocol.replace(/:$/,""):"",host:i.host,search:i.search?i.search.replace(/^\?/,""):"",hash:i.hash?i.hash.replace(/^#/,""):"",hostname:i.hostname,port:i.port,pathname:i.pathname.charAt(0)==="/"?i.pathname:"/"+i.pathname}}return a=c(window.location.href),function(h){var d=e.isString(h)?c(h):h;return d.protocol===a.protocol&&d.host===a.host}})():(function(){return function(){return!0}})(),Wt}var Xt,Dr;function ac(){if(Dr)return Xt;Dr=1;var e=Q();return Xt=e.isStandardBrowserEnv()?(function(){return{write:function(i,a,c,u,h,d){var p=[];p.push(i+"="+encodeURIComponent(a)),e.isNumber(c)&&p.push("expires="+new Date(c).toGMTString()),e.isString(u)&&p.push("path="+u),e.isString(h)&&p.push("domain="+h),d===!0&&p.push("secure"),document.cookie=p.join("; ")},read:function(i){var a=document.cookie.match(new RegExp("(^|;\\s*)("+i+")=([^;]*)"));return a?decodeURIComponent(a[3]):null},remove:function(i){this.write(i,"",Date.now()-864e5)}}})():(function(){return{write:function(){},read:function(){return null},remove:function(){}}})(),Xt}var Kt,Br;function Fr(){if(Br)return Kt;Br=1;var e=Q(),t=tc(),n=pi(),i=ic(),a=sc(),c=oc(),u=mi();return Kt=function(d){return new Promise(function(_,v){var S=d.data,C=d.headers;e.isFormData(S)&&delete C["Content-Type"];var x=new XMLHttpRequest;if(d.auth){var k=d.auth.username||"",g=d.auth.password||"";C.Authorization="Basic "+btoa(k+":"+g)}var b=i(d.baseURL,d.url);if(x.open(d.method.toUpperCase(),n(b,d.params,d.paramsSerializer),!0),x.timeout=d.timeout,x.onreadystatechange=function(){if(!(!x||x.readyState!==4)&&!(x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0))){var L="getAllResponseHeaders"in x?a(x.getAllResponseHeaders()):null,q=!d.responseType||d.responseType==="text"?x.responseText:x.response,y={data:q,status:x.status,statusText:x.statusText,headers:L,config:d,request:x};t(_,v,y),x=null}},x.onabort=function(){x&&(v(u("Request aborted",d,"ECONNABORTED",x)),x=null)},x.onerror=function(){v(u("Network Error",d,null,x)),x=null},x.ontimeout=function(){var L="timeout of "+d.timeout+"ms exceeded";d.timeoutErrorMessage&&(L=d.timeoutErrorMessage),v(u(L,d,"ECONNABORTED",x)),x=null},e.isStandardBrowserEnv()){var E=ac(),A=(d.withCredentials||c(b))&&d.xsrfCookieName?E.read(d.xsrfCookieName):void 0;A&&(C[d.xsrfHeaderName]=A)}if("setRequestHeader"in x&&e.forEach(C,function(L,q){typeof S>"u"&&q.toLowerCase()==="content-type"?delete C[q]:x.setRequestHeader(q,L)}),e.isUndefined(d.withCredentials)||(x.withCredentials=!!d.withCredentials),d.responseType)try{x.responseType=d.responseType}catch(O){if(d.responseType!=="json")throw O}typeof d.onDownloadProgress=="function"&&x.addEventListener("progress",d.onDownloadProgress),typeof d.onUploadProgress=="function"&&x.upload&&x.upload.addEventListener("progress",d.onUploadProgress),d.cancelToken&&d.cancelToken.promise.then(function(L){x&&(x.abort(),v(L),x=null)}),S===void 0&&(S=null),x.send(S)})},Kt}var Vt,$r;function vi(){if($r)return Vt;$r=1;var e=Q(),t=Za(),n={"Content-Type":"application/x-www-form-urlencoded"};function i(u,h){!e.isUndefined(u)&&e.isUndefined(u["Content-Type"])&&(u["Content-Type"]=h)}function a(){var u;return(typeof XMLHttpRequest<"u"||typeof process<"u"&&Object.prototype.toString.call(process)==="[object process]")&&(u=Fr()),u}var c={adapter:a(),transformRequest:[function(h,d){return t(d,"Accept"),t(d,"Content-Type"),e.isFormData(h)||e.isArrayBuffer(h)||e.isBuffer(h)||e.isStream(h)||e.isFile(h)||e.isBlob(h)?h:e.isArrayBufferView(h)?h.buffer:e.isURLSearchParams(h)?(i(d,"application/x-www-form-urlencoded;charset=utf-8"),h.toString()):e.isObject(h)?(i(d,"application/json;charset=utf-8"),JSON.stringify(h)):h}],transformResponse:[function(h){if(typeof h=="string")try{h=JSON.parse(h)}catch{}return h}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,validateStatus:function(h){return h>=200&&h<300}};return c.headers={common:{Accept:"application/json, text/plain, */*"}},e.forEach(["delete","get","head"],function(h){c.headers[h]={}}),e.forEach(["post","put","patch"],function(h){c.headers[h]=e.merge(n)}),Vt=c,Vt}var Jt,Ur;function cc(){if(Ur)return Jt;Ur=1;var e=Q(),t=Ya(),n=gi(),i=vi();function a(c){c.cancelToken&&c.cancelToken.throwIfRequested()}return Jt=function(u){a(u),u.headers=u.headers||{},u.data=t(u.data,u.headers,u.transformRequest),u.headers=e.merge(u.headers.common||{},u.headers[u.method]||{},u.headers),e.forEach(["delete","get","head","post","put","patch","common"],function(p){delete u.headers[p]});var h=u.adapter||i.adapter;return h(u).then(function(p){return a(u),p.data=t(p.data,p.headers,u.transformResponse),p},function(p){return n(p)||(a(u),p&&p.response&&(p.response.data=t(p.response.data,p.response.headers,u.transformResponse))),Promise.reject(p)})},Jt}var Gt,Hr;function _i(){if(Hr)return Gt;Hr=1;var e=Q();return Gt=function(n,i){i=i||{};var a={},c=["url","method","params","data"],u=["headers","auth","proxy"],h=["baseURL","url","transformRequest","transformResponse","paramsSerializer","timeout","withCredentials","adapter","responseType","xsrfCookieName","xsrfHeaderName","onUploadProgress","onDownloadProgress","maxContentLength","validateStatus","maxRedirects","httpAgent","httpsAgent","cancelToken","socketPath"];e.forEach(c,function(v){typeof i[v]<"u"&&(a[v]=i[v])}),e.forEach(u,function(v){e.isObject(i[v])?a[v]=e.deepMerge(n[v],i[v]):typeof i[v]<"u"?a[v]=i[v]:e.isObject(n[v])?a[v]=e.deepMerge(n[v]):typeof n[v]<"u"&&(a[v]=n[v])}),e.forEach(h,function(v){typeof i[v]<"u"?a[v]=i[v]:typeof n[v]<"u"&&(a[v]=n[v])});var d=c.concat(u).concat(h),p=Object.keys(i).filter(function(v){return d.indexOf(v)===-1});return e.forEach(p,function(v){typeof i[v]<"u"?a[v]=i[v]:typeof n[v]<"u"&&(a[v]=n[v])}),a},Gt}var Qt,zr;function uc(){if(zr)return Qt;zr=1;var e=Q(),t=pi(),n=Qa(),i=cc(),a=_i();function c(u){this.defaults=u,this.interceptors={request:new n,response:new n}}return c.prototype.request=function(h){typeof h=="string"?(h=arguments[1]||{},h.url=arguments[0]):h=h||{},h=a(this.defaults,h),h.method?h.method=h.method.toLowerCase():this.defaults.method?h.method=this.defaults.method.toLowerCase():h.method="get";var d=[i,void 0],p=Promise.resolve(h);for(this.interceptors.request.forEach(function(v){d.unshift(v.fulfilled,v.rejected)}),this.interceptors.response.forEach(function(v){d.push(v.fulfilled,v.rejected)});d.length;)p=p.then(d.shift(),d.shift());return p},c.prototype.getUri=function(h){return h=a(this.defaults,h),t(h.url,h.params,h.paramsSerializer).replace(/^\?/,"")},e.forEach(["delete","get","head","options"],function(h){c.prototype[h]=function(d,p){return this.request(e.merge(p||{},{method:h,url:d}))}}),e.forEach(["post","put","patch"],function(h){c.prototype[h]=function(d,p,_){return this.request(e.merge(_||{},{method:h,url:d,data:p}))}}),Qt=c,Qt}var Yt,Wr;function bi(){if(Wr)return Yt;Wr=1;function e(t){this.message=t}return e.prototype.toString=function(){return"Cancel"+(this.message?": "+this.message:"")},e.prototype.__CANCEL__=!0,Yt=e,Yt}var Zt,Xr;function lc(){if(Xr)return Zt;Xr=1;var e=bi();function t(n){if(typeof n!="function")throw new TypeError("executor must be a function.");var i;this.promise=new Promise(function(u){i=u});var a=this;n(function(u){a.reason||(a.reason=new e(u),i(a.reason))})}return t.prototype.throwIfRequested=function(){if(this.reason)throw this.reason},t.source=function(){var i,a=new t(function(u){i=u});return{token:a,cancel:i}},Zt=t,Zt}var en,Kr;function hc(){return Kr||(Kr=1,en=function(t){return function(i){return t.apply(null,i)}}),en}var Vr;function dc(){if(Vr)return Ze.exports;Vr=1;var e=Q(),t=fi(),n=uc(),i=_i(),a=vi();function c(h){var d=new n(h),p=t(n.prototype.request,d);return e.extend(p,n.prototype,d),e.extend(p,d),p}var u=c(a);return u.Axios=n,u.create=function(d){return c(i(u.defaults,d))},u.Cancel=bi(),u.CancelToken=lc(),u.isCancel=gi(),u.all=function(d){return Promise.all(d)},u.spread=hc(),Ze.exports=u,Ze.exports.default=u,Ze.exports}var tn,Jr;function fc(){return Jr||(Jr=1,tn=dc()),tn}var pc=fc();const gc=di(pc);class En{constructor(){this.notificationCreatedEvent=".Illuminate\\Notifications\\Events\\BroadcastNotificationCreated"}listenForWhisper(t,n){return this.listen(".client-"+t,n)}notification(t){return this.listen(this.notificationCreatedEvent,t)}stopListeningForNotification(t){return this.stopListening(this.notificationCreatedEvent,t)}stopListeningForWhisper(t,n){return this.stopListening(".client-"+t,n)}}class yi{constructor(t){this.namespace=t}format(t){return[".","\\"].includes(t.charAt(0))?t.substring(1):(this.namespace&&(t=this.namespace+"."+t),t.replace(/\./g,"\\"))}setNamespace(t){this.namespace=t}}function mc(e){try{new e}catch(t){if(t instanceof Error&&t.message.includes("is not a constructor"))return!1}return!0}class Tn extends En{constructor(t,n,i){super(),this.name=n,this.pusher=t,this.options=i,this.eventFormatter=new yi(this.options.namespace),this.subscribe()}subscribe(){this.subscription=this.pusher.subscribe(this.name)}unsubscribe(){this.pusher.unsubscribe(this.name)}listen(t,n){return this.on(this.eventFormatter.format(t),n),this}listenToAll(t){return this.subscription.bind_global((n,i)=>{if(n.startsWith("pusher:"))return;let a=String(this.options.namespace??"").replace(/\./g,"\\"),c=n.startsWith(a)?n.substring(a.length+1):"."+n;t(c,i)}),this}stopListening(t,n){return n?this.subscription.unbind(this.eventFormatter.format(t),n):this.subscription.unbind(this.eventFormatter.format(t)),this}stopListeningToAll(t){return t?this.subscription.unbind_global(t):this.subscription.unbind_global(),this}subscribed(t){return this.on("pusher:subscription_succeeded",()=>{t()}),this}error(t){return this.on("pusher:subscription_error",n=>{t(n)}),this}on(t,n){return this.subscription.bind(t,n),this}}class wi extends Tn{whisper(t,n){return this.pusher.channels.channels[this.name].trigger(`client-${t}`,n),this}}class vc extends Tn{whisper(t,n){return this.pusher.channels.channels[this.name].trigger(`client-${t}`,n),this}}class _c extends wi{here(t){return this.on("pusher:subscription_succeeded",n=>{t(Object.keys(n.members).map(i=>n.members[i]))}),this}joining(t){return this.on("pusher:member_added",n=>{t(n.info)}),this}whisper(t,n){return this.pusher.channels.channels[this.name].trigger(`client-${t}`,n),this}leaving(t){return this.on("pusher:member_removed",n=>{t(n.info)}),this}}class xi extends En{constructor(t,n,i){super(),this.events={},this.listeners={},this.name=n,this.socket=t,this.options=i,this.eventFormatter=new yi(this.options.namespace),this.subscribe()}subscribe(){this.socket.emit("subscribe",{channel:this.name,auth:this.options.auth||{}})}unsubscribe(){this.unbind(),this.socket.emit("unsubscribe",{channel:this.name,auth:this.options.auth||{}})}listen(t,n){return this.on(this.eventFormatter.format(t),n),this}stopListening(t,n){return this.unbindEvent(this.eventFormatter.format(t),n),this}subscribed(t){return this.on("connect",n=>{t(n)}),this}error(t){return this}on(t,n){return this.listeners[t]=this.listeners[t]||[],this.events[t]||(this.events[t]=(i,a)=>{this.name===i&&this.listeners[t]&&this.listeners[t].forEach(c=>c(a))},this.socket.on(t,this.events[t])),this.listeners[t].push(n),this}unbind(){Object.keys(this.events).forEach(t=>{this.unbindEvent(t)})}unbindEvent(t,n){this.listeners[t]=this.listeners[t]||[],n&&(this.listeners[t]=this.listeners[t].filter(i=>i!==n)),(!n||this.listeners[t].length===0)&&(this.events[t]&&(this.socket.removeListener(t,this.events[t]),delete this.events[t]),delete this.listeners[t])}}class Si extends xi{whisper(t,n){return this.socket.emit("client event",{channel:this.name,event:`client-${t}`,data:n}),this}}class bc extends Si{here(t){return this.on("presence:subscribed",n=>{t(n.map(i=>i.user_info))}),this}joining(t){return this.on("presence:joining",n=>t(n.user_info)),this}whisper(t,n){return this.socket.emit("client event",{channel:this.name,event:`client-${t}`,data:n}),this}leaving(t){return this.on("presence:leaving",n=>t(n.user_info)),this}}class at extends En{subscribe(){}unsubscribe(){}listen(t,n){return this}listenToAll(t){return this}stopListening(t,n){return this}subscribed(t){return this}error(t){return this}on(t,n){return this}}class Ci extends at{whisper(t,n){return this}}class yc extends at{whisper(t,n){return this}}class wc extends Ci{here(t){return this}joining(t){return this}whisper(t,n){return this}leaving(t){return this}}const Ei=class Ti{constructor(t){this.setOptions(t),this.connect()}setOptions(t){this.options={...Ti._defaultOptions,...t,broadcaster:t.broadcaster};let n=this.csrfToken();n&&(this.options.auth.headers["X-CSRF-TOKEN"]=n,this.options.userAuthentication.headers["X-CSRF-TOKEN"]=n),n=this.options.bearerToken,n&&(this.options.auth.headers.Authorization="Bearer "+n,this.options.userAuthentication.headers.Authorization="Bearer "+n)}csrfToken(){var t,n;return typeof window<"u"&&(t=window.Laravel)!=null&&t.csrfToken?window.Laravel.csrfToken:this.options.csrfToken?this.options.csrfToken:typeof document<"u"&&typeof document.querySelector=="function"?((n=document.querySelector('meta[name="csrf-token"]'))==null?void 0:n.getAttribute("content"))??null:null}};Ei._defaultOptions={auth:{headers:{}},authEndpoint:"/broadcasting/auth",userAuthentication:{endpoint:"/broadcasting/user-auth",headers:{}},csrfToken:null,bearerToken:null,host:null,key:null,namespace:"App.Events"};let kn=Ei;class et extends kn{constructor(){super(...arguments),this.channels={}}connect(){if(typeof this.options.client<"u")this.pusher=this.options.client;else if(this.options.Pusher)this.pusher=new this.options.Pusher(this.options.key,this.options);else if(typeof window<"u"&&typeof window.Pusher<"u")this.pusher=new window.Pusher(this.options.key,this.options);else throw new Error("Pusher client not found. Should be globally available or passed via options.client")}signin(){this.pusher.signin()}listen(t,n,i){return this.channel(t).listen(n,i)}channel(t){return this.channels[t]||(this.channels[t]=new Tn(this.pusher,t,this.options)),this.channels[t]}privateChannel(t){return this.channels["private-"+t]||(this.channels["private-"+t]=new wi(this.pusher,"private-"+t,this.options)),this.channels["private-"+t]}encryptedPrivateChannel(t){return this.channels["private-encrypted-"+t]||(this.channels["private-encrypted-"+t]=new vc(this.pusher,"private-encrypted-"+t,this.options)),this.channels["private-encrypted-"+t]}presenceChannel(t){return this.channels["presence-"+t]||(this.channels["presence-"+t]=new _c(this.pusher,"presence-"+t,this.options)),this.channels["presence-"+t]}leave(t){[t,"private-"+t,"private-encrypted-"+t,"presence-"+t].forEach(n=>{this.leaveChannel(n)})}leaveChannel(t){this.channels[t]&&(this.channels[t].unsubscribe(),delete this.channels[t])}socketId(){return this.pusher.connection.socket_id}disconnect(){this.pusher.disconnect()}}class xc extends kn{constructor(){super(...arguments),this.channels={}}connect(){let t=this.getSocketIO();this.socket=t(this.options.host??void 0,this.options),this.socket.io.on("reconnect",()=>{Object.values(this.channels).forEach(n=>{n.subscribe()})})}getSocketIO(){if(typeof this.options.client<"u")return this.options.client;if(typeof window<"u"&&typeof window.io<"u")return window.io;throw new Error("Socket.io client not found. Should be globally available or passed via options.client")}listen(t,n,i){return this.channel(t).listen(n,i)}channel(t){return this.channels[t]||(this.channels[t]=new xi(this.socket,t,this.options)),this.channels[t]}privateChannel(t){return this.channels["private-"+t]||(this.channels["private-"+t]=new Si(this.socket,"private-"+t,this.options)),this.channels["private-"+t]}presenceChannel(t){return this.channels["presence-"+t]||(this.channels["presence-"+t]=new bc(this.socket,"presence-"+t,this.options)),this.channels["presence-"+t]}leave(t){[t,"private-"+t,"presence-"+t].forEach(n=>{this.leaveChannel(n)})}leaveChannel(t){this.channels[t]&&(this.channels[t].unsubscribe(),delete this.channels[t])}socketId(){return this.socket.id}disconnect(){this.socket.disconnect()}}class Gr extends kn{constructor(){super(...arguments),this.channels={}}connect(){}listen(t,n,i){return new at}channel(t){return new at}privateChannel(t){return new Ci}encryptedPrivateChannel(t){return new yc}presenceChannel(t){return new wc}leave(t){}leaveChannel(t){}socketId(){return"fake-socket-id"}disconnect(){}}class Sc{constructor(t){this.options=t,this.connect(),this.options.withoutInterceptors||this.registerInterceptors()}channel(t){return this.connector.channel(t)}connect(){if(this.options.broadcaster==="reverb")this.connector=new et({...this.options,cluster:""});else if(this.options.broadcaster==="pusher")this.connector=new et(this.options);else if(this.options.broadcaster==="ably")this.connector=new et({...this.options,cluster:"",broadcaster:"pusher"});else if(this.options.broadcaster==="socket.io")this.connector=new xc(this.options);else if(this.options.broadcaster==="null")this.connector=new Gr(this.options);else if(typeof this.options.broadcaster=="function"&&mc(this.options.broadcaster))this.connector=new this.options.broadcaster(this.options);else throw new Error(`Broadcaster ${typeof this.options.broadcaster} ${String(this.options.broadcaster)} is not supported.`)}disconnect(){this.connector.disconnect()}join(t){return this.connector.presenceChannel(t)}leave(t){this.connector.leave(t)}leaveChannel(t){this.connector.leaveChannel(t)}leaveAllChannels(){for(const t in this.connector.channels)this.leaveChannel(t)}listen(t,n,i){return this.connector.listen(t,n,i)}private(t){return this.connector.privateChannel(t)}encryptedPrivate(t){if(this.connectorSupportsEncryptedPrivateChannels(this.connector))return this.connector.encryptedPrivateChannel(t);throw new Error(`Broadcaster ${typeof this.options.broadcaster} ${String(this.options.broadcaster)} does not support encrypted private channels.`)}connectorSupportsEncryptedPrivateChannels(t){return t instanceof et||t instanceof Gr}socketId(){return this.connector.socketId()}registerInterceptors(){typeof Vue<"u"&&Vue!=null&&Vue.http&&this.registerVueRequestInterceptor(),typeof axios=="function"&&this.registerAxiosRequestInterceptor(),typeof jQuery=="function"&&this.registerjQueryAjaxSetup(),typeof Turbo=="object"&&this.registerTurboRequestInterceptor()}registerVueRequestInterceptor(){Vue.http.interceptors.push((t,n)=>{this.socketId()&&t.headers.set("X-Socket-ID",this.socketId()),n()})}registerAxiosRequestInterceptor(){axios.interceptors.request.use(t=>(this.socketId()&&(t.headers["X-Socket-Id"]=this.socketId()),t))}registerjQueryAjaxSetup(){typeof jQuery.ajax<"u"&&jQuery.ajaxPrefilter((t,n,i)=>{this.socketId()&&i.setRequestHeader("X-Socket-Id",this.socketId())})}registerTurboRequestInterceptor(){document.addEventListener("turbo:before-fetch-request",t=>{t.detail.fetchOptions.headers["X-Socket-Id"]=this.socketId()})}}var nn={exports:{}};var Qr;function Cc(){return Qr||(Qr=1,(function(e,t){(function(i,a){e.exports=a()})(window,function(){return(function(n){var i={};function a(c){if(i[c])return i[c].exports;var u=i[c]={i:c,l:!1,exports:{}};return n[c].call(u.exports,u,u.exports,a),u.l=!0,u.exports}return a.m=n,a.c=i,a.d=function(c,u,h){a.o(c,u)||Object.defineProperty(c,u,{enumerable:!0,get:h})},a.r=function(c){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(c,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(c,"__esModule",{value:!0})},a.t=function(c,u){if(u&1&&(c=a(c)),u&8||u&4&&typeof c=="object"&&c&&c.__esModule)return c;var h=Object.create(null);if(a.r(h),Object.defineProperty(h,"default",{enumerable:!0,value:c}),u&2&&typeof c!="string")for(var d in c)a.d(h,d,(function(p){return c[p]}).bind(null,d));return h},a.n=function(c){var u=c&&c.__esModule?function(){return c.default}:function(){return c};return a.d(u,"a",u),u},a.o=function(c,u){return Object.prototype.hasOwnProperty.call(c,u)},a.p="",a(a.s=2)})([(function(n,i,a){var c=this&&this.__extends||(function(){var k=function(g,b){return k=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(E,A){E.__proto__=A}||function(E,A){for(var O in A)A.hasOwnProperty(O)&&(E[O]=A[O])},k(g,b)};return function(g,b){k(g,b);function E(){this.constructor=g}g.prototype=b===null?Object.create(b):(E.prototype=b.prototype,new E)}})();Object.defineProperty(i,"__esModule",{value:!0});var u=256,h=(function(){function k(g){g===void 0&&(g="="),this._paddingCharacter=g}return k.prototype.encodedLength=function(g){return this._paddingCharacter?(g+2)/3*4|0:(g*8+5)/6|0},k.prototype.encode=function(g){for(var b="",E=0;E<g.length-2;E+=3){var A=g[E]<<16|g[E+1]<<8|g[E+2];b+=this._encodeByte(A>>>18&63),b+=this._encodeByte(A>>>12&63),b+=this._encodeByte(A>>>6&63),b+=this._encodeByte(A>>>0&63)}var O=g.length-E;if(O>0){var A=g[E]<<16|(O===2?g[E+1]<<8:0);b+=this._encodeByte(A>>>18&63),b+=this._encodeByte(A>>>12&63),O===2?b+=this._encodeByte(A>>>6&63):b+=this._paddingCharacter||"",b+=this._paddingCharacter||""}return b},k.prototype.maxDecodedLength=function(g){return this._paddingCharacter?g/4*3|0:(g*6+7)/8|0},k.prototype.decodedLength=function(g){return this.maxDecodedLength(g.length-this._getPaddingLength(g))},k.prototype.decode=function(g){if(g.length===0)return new Uint8Array(0);for(var b=this._getPaddingLength(g),E=g.length-b,A=new Uint8Array(this.maxDecodedLength(E)),O=0,L=0,q=0,y=0,N=0,j=0,X=0;L<E-4;L+=4)y=this._decodeChar(g.charCodeAt(L+0)),N=this._decodeChar(g.charCodeAt(L+1)),j=this._decodeChar(g.charCodeAt(L+2)),X=this._decodeChar(g.charCodeAt(L+3)),A[O++]=y<<2|N>>>4,A[O++]=N<<4|j>>>2,A[O++]=j<<6|X,q|=y&u,q|=N&u,q|=j&u,q|=X&u;if(L<E-1&&(y=this._decodeChar(g.charCodeAt(L)),N=this._decodeChar(g.charCodeAt(L+1)),A[O++]=y<<2|N>>>4,q|=y&u,q|=N&u),L<E-2&&(j=this._decodeChar(g.charCodeAt(L+2)),A[O++]=N<<4|j>>>2,q|=j&u),L<E-3&&(X=this._decodeChar(g.charCodeAt(L+3)),A[O++]=j<<6|X,q|=X&u),q!==0)throw new Error("Base64Coder: incorrect characters for decoding");return A},k.prototype._encodeByte=function(g){var b=g;return b+=65,b+=25-g>>>8&6,b+=51-g>>>8&-75,b+=61-g>>>8&-15,b+=62-g>>>8&3,String.fromCharCode(b)},k.prototype._decodeChar=function(g){var b=u;return b+=(42-g&g-44)>>>8&-u+g-43+62,b+=(46-g&g-48)>>>8&-u+g-47+63,b+=(47-g&g-58)>>>8&-u+g-48+52,b+=(64-g&g-91)>>>8&-u+g-65+0,b+=(96-g&g-123)>>>8&-u+g-97+26,b},k.prototype._getPaddingLength=function(g){var b=0;if(this._paddingCharacter){for(var E=g.length-1;E>=0&&g[E]===this._paddingCharacter;E--)b++;if(g.length<4||b>2)throw new Error("Base64Coder: incorrect padding")}return b},k})();i.Coder=h;var d=new h;function p(k){return d.encode(k)}i.encode=p;function _(k){return d.decode(k)}i.decode=_;var v=(function(k){c(g,k);function g(){return k!==null&&k.apply(this,arguments)||this}return g.prototype._encodeByte=function(b){var E=b;return E+=65,E+=25-b>>>8&6,E+=51-b>>>8&-75,E+=61-b>>>8&-13,E+=62-b>>>8&49,String.fromCharCode(E)},g.prototype._decodeChar=function(b){var E=u;return E+=(44-b&b-46)>>>8&-u+b-45+62,E+=(94-b&b-96)>>>8&-u+b-95+63,E+=(47-b&b-58)>>>8&-u+b-48+52,E+=(64-b&b-91)>>>8&-u+b-65+0,E+=(96-b&b-123)>>>8&-u+b-97+26,E},g})(h);i.URLSafeCoder=v;var S=new v;function C(k){return S.encode(k)}i.encodeURLSafe=C;function x(k){return S.decode(k)}i.decodeURLSafe=x,i.encodedLength=function(k){return d.encodedLength(k)},i.maxDecodedLength=function(k){return d.maxDecodedLength(k)},i.decodedLength=function(k){return d.decodedLength(k)}}),(function(n,i,a){Object.defineProperty(i,"__esModule",{value:!0});var c="utf8: invalid string",u="utf8: invalid source encoding";function h(_){for(var v=new Uint8Array(d(_)),S=0,C=0;C<_.length;C++){var x=_.charCodeAt(C);x<128?v[S++]=x:x<2048?(v[S++]=192|x>>6,v[S++]=128|x&63):x<55296?(v[S++]=224|x>>12,v[S++]=128|x>>6&63,v[S++]=128|x&63):(C++,x=(x&1023)<<10,x|=_.charCodeAt(C)&1023,x+=65536,v[S++]=240|x>>18,v[S++]=128|x>>12&63,v[S++]=128|x>>6&63,v[S++]=128|x&63)}return v}i.encode=h;function d(_){for(var v=0,S=0;S<_.length;S++){var C=_.charCodeAt(S);if(C<128)v+=1;else if(C<2048)v+=2;else if(C<55296)v+=3;else if(C<=57343){if(S>=_.length-1)throw new Error(c);S++,v+=4}else throw new Error(c)}return v}i.encodedLength=d;function p(_){for(var v=[],S=0;S<_.length;S++){var C=_[S];if(C&128){var x=void 0;if(C<224){if(S>=_.length)throw new Error(u);var k=_[++S];if((k&192)!==128)throw new Error(u);C=(C&31)<<6|k&63,x=128}else if(C<240){if(S>=_.length-1)throw new Error(u);var k=_[++S],g=_[++S];if((k&192)!==128||(g&192)!==128)throw new Error(u);C=(C&15)<<12|(k&63)<<6|g&63,x=2048}else if(C<248){if(S>=_.length-2)throw new Error(u);var k=_[++S],g=_[++S],b=_[++S];if((k&192)!==128||(g&192)!==128||(b&192)!==128)throw new Error(u);C=(C&15)<<18|(k&63)<<12|(g&63)<<6|b&63,x=65536}else throw new Error(u);if(C<x||C>=55296&&C<=57343)throw new Error(u);if(C>=65536){if(C>1114111)throw new Error(u);C-=65536,v.push(String.fromCharCode(55296|C>>10)),C=56320|C&1023}}v.push(String.fromCharCode(C))}return v.join("")}i.decode=p}),(function(n,i,a){n.exports=a(3).default}),(function(n,i,a){a.r(i);class c{constructor(r,s){this.lastId=0,this.prefix=r,this.name=s}create(r){this.lastId++;var s=this.lastId,l=this.prefix+s,f=this.name+"["+s+"]",m=!1,w=function(){m||(r.apply(null,arguments),m=!0)};return this[s]=w,{number:s,id:l,name:f,callback:w}}remove(r){delete this[r.number]}}var u=new c("_pusher_script_","Pusher.ScriptReceivers"),h={VERSION:"8.4.0",PROTOCOL:7,wsPort:80,wssPort:443,wsPath:"",httpHost:"sockjs.pusher.com",httpPort:80,httpsPort:443,httpPath:"/pusher",stats_host:"stats.pusher.com",authEndpoint:"/pusher/auth",authTransport:"ajax",activityTimeout:12e4,pongTimeout:3e4,unavailableTimeout:1e4,userAuthentication:{endpoint:"/pusher/user-auth",transport:"ajax"},channelAuthorization:{endpoint:"/pusher/auth",transport:"ajax"},cdn_http:"http://js.pusher.com",cdn_https:"https://js.pusher.com",dependency_suffix:""},d=h;class p{constructor(r){this.options=r,this.receivers=r.receivers||u,this.loading={}}load(r,s,l){var f=this;if(f.loading[r]&&f.loading[r].length>0)f.loading[r].push(l);else{f.loading[r]=[l];var m=P.createScriptRequest(f.getPath(r,s)),w=f.receivers.create(function(T){if(f.receivers.remove(w),f.loading[r]){var R=f.loading[r];delete f.loading[r];for(var I=function(U){U||m.cleanup()},M=0;M<R.length;M++)R[M](T,I)}});m.send(w)}}getRoot(r){var s,l=P.getDocument().location.protocol;return r&&r.useTLS||l==="https:"?s=this.options.cdn_https:s=this.options.cdn_http,s.replace(/\/*$/,"")+"/"+this.options.version}getPath(r,s){return this.getRoot(s)+"/"+r+this.options.suffix+".js"}}var _=new c("_pusher_dependencies","Pusher.DependenciesReceivers"),v=new p({cdn_http:d.cdn_http,cdn_https:d.cdn_https,version:d.VERSION,suffix:d.dependency_suffix,receivers:_});const S={baseUrl:"https://pusher.com",urls:{authenticationEndpoint:{path:"/docs/channels/server_api/authenticating_users"},authorizationEndpoint:{path:"/docs/channels/server_api/authorizing-users/"},javascriptQuickStart:{path:"/docs/javascript_quick_start"},triggeringClientEvents:{path:"/docs/client_api_guide/client_events#trigger-events"},encryptedChannelSupport:{fullUrl:"https://github.com/pusher/pusher-js/tree/cc491015371a4bde5743d1c87a0fbac0feb53195#encrypted-channel-support"}}};var x={buildLogSuffix:function(o){const r="See:",s=S.urls[o];if(!s)return"";let l;return s.fullUrl?l=s.fullUrl:s.path&&(l=S.baseUrl+s.path),l?`${r} ${l}`:""}},k;(function(o){o.UserAuthentication="user-authentication",o.ChannelAuthorization="channel-authorization"})(k||(k={}));class g extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}}class b extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}}class E extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}}class A extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}}class O extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}}class L extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}}class q extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}}class y extends Error{constructor(r){super(r),Object.setPrototypeOf(this,new.target.prototype)}}class N extends Error{constructor(r,s){super(s),this.status=r,Object.setPrototypeOf(this,new.target.prototype)}}var X=function(o,r,s,l,f){const m=P.createXHR();m.open("POST",s.endpoint,!0),m.setRequestHeader("Content-Type","application/x-www-form-urlencoded");for(var w in s.headers)m.setRequestHeader(w,s.headers[w]);if(s.headersProvider!=null){let T=s.headersProvider();for(var w in T)m.setRequestHeader(w,T[w])}return m.onreadystatechange=function(){if(m.readyState===4)if(m.status===200){let T,R=!1;try{T=JSON.parse(m.responseText),R=!0}catch{f(new N(200,`JSON returned from ${l.toString()} endpoint was invalid, yet status code was 200. Data was: ${m.responseText}`),null)}R&&f(null,T)}else{let T="";switch(l){case k.UserAuthentication:T=x.buildLogSuffix("authenticationEndpoint");break;case k.ChannelAuthorization:T=`Clients must be authorized to join private or presence channels. ${x.buildLogSuffix("authorizationEndpoint")}`;break}f(new N(m.status,`Unable to retrieve auth string from ${l.toString()} endpoint - received status: ${m.status} from ${s.endpoint}. ${T}`),null)}},m.send(r),m};function z(o){return zs(Us(o))}var W=String.fromCharCode,Ke="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",$s=function(o){var r=o.charCodeAt(0);return r<128?o:r<2048?W(192|r>>>6)+W(128|r&63):W(224|r>>>12&15)+W(128|r>>>6&63)+W(128|r&63)},Us=function(o){return o.replace(/[^\x00-\x7F]/g,$s)},Hs=function(o){var r=[0,2,1][o.length%3],s=o.charCodeAt(0)<<16|(o.length>1?o.charCodeAt(1):0)<<8|(o.length>2?o.charCodeAt(2):0),l=[Ke.charAt(s>>>18),Ke.charAt(s>>>12&63),r>=2?"=":Ke.charAt(s>>>6&63),r>=1?"=":Ke.charAt(s&63)];return l.join("")},zs=window.btoa||function(o){return o.replace(/[\s\S]{1,3}/g,Hs)};class Ws{constructor(r,s,l,f){this.clear=s,this.timer=r(()=>{this.timer&&(this.timer=f(this.timer))},l)}isRunning(){return this.timer!==null}ensureAborted(){this.timer&&(this.clear(this.timer),this.timer=null)}}var Gn=Ws;function Xs(o){window.clearTimeout(o)}function Ks(o){window.clearInterval(o)}class he extends Gn{constructor(r,s){super(setTimeout,Xs,r,function(l){return s(),null})}}class Vs extends Gn{constructor(r,s){super(setInterval,Ks,r,function(l){return s(),l})}}var Js={now(){return Date.now?Date.now():new Date().valueOf()},defer(o){return new he(0,o)},method(o,...r){var s=Array.prototype.slice.call(arguments,1);return function(l){return l[o].apply(l,s.concat(arguments))}}},V=Js;function G(o,...r){for(var s=0;s<r.length;s++){var l=r[s];for(var f in l)l[f]&&l[f].constructor&&l[f].constructor===Object?o[f]=G(o[f]||{},l[f]):o[f]=l[f]}return o}function Gs(){for(var o=["Pusher"],r=0;r<arguments.length;r++)typeof arguments[r]=="string"?o.push(arguments[r]):o.push(Ve(arguments[r]));return o.join(" : ")}function Qn(o,r){var s=Array.prototype.indexOf;if(o===null)return-1;if(s&&o.indexOf===s)return o.indexOf(r);for(var l=0,f=o.length;l<f;l++)if(o[l]===r)return l;return-1}function re(o,r){for(var s in o)Object.prototype.hasOwnProperty.call(o,s)&&r(o[s],s,o)}function Yn(o){var r=[];return re(o,function(s,l){r.push(l)}),r}function Qs(o){var r=[];return re(o,function(s){r.push(s)}),r}function Me(o,r,s){for(var l=0;l<o.length;l++)r.call(s||window,o[l],l,o)}function Zn(o,r){for(var s=[],l=0;l<o.length;l++)s.push(r(o[l],l,o,s));return s}function Ys(o,r){var s={};return re(o,function(l,f){s[f]=r(l)}),s}function er(o,r){r=r||function(f){return!!f};for(var s=[],l=0;l<o.length;l++)r(o[l],l,o,s)&&s.push(o[l]);return s}function tr(o,r){var s={};return re(o,function(l,f){(r&&r(l,f,o,s)||l)&&(s[f]=l)}),s}function Zs(o){var r=[];return re(o,function(s,l){r.push([l,s])}),r}function nr(o,r){for(var s=0;s<o.length;s++)if(r(o[s],s,o))return!0;return!1}function eo(o,r){for(var s=0;s<o.length;s++)if(!r(o[s],s,o))return!1;return!0}function to(o){return Ys(o,function(r){return typeof r=="object"&&(r=Ve(r)),encodeURIComponent(z(r.toString()))})}function no(o){var r=tr(o,function(l){return l!==void 0}),s=Zn(Zs(to(r)),V.method("join","=")).join("&");return s}function ro(o){var r=[],s=[];return(function l(f,m){var w,T,R;switch(typeof f){case"object":if(!f)return null;for(w=0;w<r.length;w+=1)if(r[w]===f)return{$ref:s[w]};if(r.push(f),s.push(m),Object.prototype.toString.apply(f)==="[object Array]")for(R=[],w=0;w<f.length;w+=1)R[w]=l(f[w],m+"["+w+"]");else{R={};for(T in f)Object.prototype.hasOwnProperty.call(f,T)&&(R[T]=l(f[T],m+"["+JSON.stringify(T)+"]"))}return R;case"number":case"string":case"boolean":return f}})(o,"$")}function Ve(o){try{return JSON.stringify(o)}catch{return JSON.stringify(ro(o))}}class io{constructor(){this.globalLog=r=>{window.console&&window.console.log&&window.console.log(r)}}debug(...r){this.log(this.globalLog,r)}warn(...r){this.log(this.globalLogWarn,r)}error(...r){this.log(this.globalLogError,r)}globalLogWarn(r){window.console&&window.console.warn?window.console.warn(r):this.globalLog(r)}globalLogError(r){window.console&&window.console.error?window.console.error(r):this.globalLogWarn(r)}log(r,...s){var l=Gs.apply(this,arguments);At.log?At.log(l):At.logToConsole&&r.bind(this)(l)}}var B=new io,so=function(o,r,s,l,f){(s.headers!==void 0||s.headersProvider!=null)&&B.warn(`To send headers with the ${l.toString()} request, you must use AJAX, rather than JSONP.`);var m=o.nextAuthCallbackID.toString();o.nextAuthCallbackID++;var w=o.getDocument(),T=w.createElement("script");o.auth_callbacks[m]=function(M){f(null,M)};var R="Pusher.auth_callbacks['"+m+"']";T.src=s.endpoint+"?callback="+encodeURIComponent(R)+"&"+r;var I=w.getElementsByTagName("head")[0]||w.documentElement;I.insertBefore(T,I.firstChild)},oo=so;class ao{constructor(r){this.src=r}send(r){var s=this,l="Error loading "+s.src;s.script=document.createElement("script"),s.script.id=r.id,s.script.src=s.src,s.script.type="text/javascript",s.script.charset="UTF-8",s.script.addEventListener?(s.script.onerror=function(){r.callback(l)},s.script.onload=function(){r.callback(null)}):s.script.onreadystatechange=function(){(s.script.readyState==="loaded"||s.script.readyState==="complete")&&r.callback(null)},s.script.async===void 0&&document.attachEvent&&/opera/i.test(navigator.userAgent)?(s.errorScript=document.createElement("script"),s.errorScript.id=r.id+"_error",s.errorScript.text=r.name+"('"+l+"');",s.script.async=s.errorScript.async=!1):s.script.async=!0;var f=document.getElementsByTagName("head")[0];f.insertBefore(s.script,f.firstChild),s.errorScript&&f.insertBefore(s.errorScript,s.script.nextSibling)}cleanup(){this.script&&(this.script.onload=this.script.onerror=null,this.script.onreadystatechange=null),this.script&&this.script.parentNode&&this.script.parentNode.removeChild(this.script),this.errorScript&&this.errorScript.parentNode&&this.errorScript.parentNode.removeChild(this.errorScript),this.script=null,this.errorScript=null}}class co{constructor(r,s){this.url=r,this.data=s}send(r){if(!this.request){var s=no(this.data),l=this.url+"/"+r.number+"?"+s;this.request=P.createScriptRequest(l),this.request.send(r)}}cleanup(){this.request&&this.request.cleanup()}}var uo=function(o,r){return function(s,l){var f="http"+(r?"s":"")+"://",m=f+(o.host||o.options.host)+o.options.path,w=P.createJSONPRequest(m,s),T=P.ScriptReceivers.create(function(R,I){u.remove(T),w.cleanup(),I&&I.host&&(o.host=I.host),l&&l(R,I)});w.send(T)}},lo={name:"jsonp",getAgent:uo},ho=lo;function _t(o,r,s){var l=o+(r.useTLS?"s":""),f=r.useTLS?r.hostTLS:r.hostNonTLS;return l+"://"+f+s}function bt(o,r){var s="/app/"+o,l="?protocol="+d.PROTOCOL+"&client=js&version="+d.VERSION+(r?"&"+r:"");return s+l}var fo={getInitial:function(o,r){var s=(r.httpPath||"")+bt(o,"flash=false");return _t("ws",r,s)}},po={getInitial:function(o,r){var s=(r.httpPath||"/pusher")+bt(o);return _t("http",r,s)}},go={getInitial:function(o,r){return _t("http",r,r.httpPath||"/pusher")},getPath:function(o,r){return bt(o)}};class mo{constructor(){this._callbacks={}}get(r){return this._callbacks[yt(r)]}add(r,s,l){var f=yt(r);this._callbacks[f]=this._callbacks[f]||[],this._callbacks[f].push({fn:s,context:l})}remove(r,s,l){if(!r&&!s&&!l){this._callbacks={};return}var f=r?[yt(r)]:Yn(this._callbacks);s||l?this.removeCallback(f,s,l):this.removeAllCallbacks(f)}removeCallback(r,s,l){Me(r,function(f){this._callbacks[f]=er(this._callbacks[f]||[],function(m){return s&&s!==m.fn||l&&l!==m.context}),this._callbacks[f].length===0&&delete this._callbacks[f]},this)}removeAllCallbacks(r){Me(r,function(s){delete this._callbacks[s]},this)}}function yt(o){return"_"+o}class ie{constructor(r){this.callbacks=new mo,this.global_callbacks=[],this.failThrough=r}bind(r,s,l){return this.callbacks.add(r,s,l),this}bind_global(r){return this.global_callbacks.push(r),this}unbind(r,s,l){return this.callbacks.remove(r,s,l),this}unbind_global(r){return r?(this.global_callbacks=er(this.global_callbacks||[],s=>s!==r),this):(this.global_callbacks=[],this)}unbind_all(){return this.unbind(),this.unbind_global(),this}emit(r,s,l){for(var f=0;f<this.global_callbacks.length;f++)this.global_callbacks[f](r,s);var m=this.callbacks.get(r),w=[];if(l?w.push(s,l):s&&w.push(s),m&&m.length>0)for(var f=0;f<m.length;f++)m[f].fn.apply(m[f].context||window,w);else this.failThrough&&this.failThrough(r,s);return this}}class vo extends ie{constructor(r,s,l,f,m){super(),this.initialize=P.transportConnectionInitializer,this.hooks=r,this.name=s,this.priority=l,this.key=f,this.options=m,this.state="new",this.timeline=m.timeline,this.activityTimeout=m.activityTimeout,this.id=this.timeline.generateUniqueID()}handlesActivityChecks(){return!!this.hooks.handlesActivityChecks}supportsPing(){return!!this.hooks.supportsPing}connect(){if(this.socket||this.state!=="initialized")return!1;var r=this.hooks.urls.getInitial(this.key,this.options);try{this.socket=this.hooks.getSocket(r,this.options)}catch(s){return V.defer(()=>{this.onError(s),this.changeState("closed")}),!1}return this.bindListeners(),B.debug("Connecting",{transport:this.name,url:r}),this.changeState("connecting"),!0}close(){return this.socket?(this.socket.close(),!0):!1}send(r){return this.state==="open"?(V.defer(()=>{this.socket&&this.socket.send(r)}),!0):!1}ping(){this.state==="open"&&this.supportsPing()&&this.socket.ping()}onOpen(){this.hooks.beforeOpen&&this.hooks.beforeOpen(this.socket,this.hooks.urls.getPath(this.key,this.options)),this.changeState("open"),this.socket.onopen=void 0}onError(r){this.emit("error",{type:"WebSocketError",error:r}),this.timeline.error(this.buildTimelineMessage({error:r.toString()}))}onClose(r){r?this.changeState("closed",{code:r.code,reason:r.reason,wasClean:r.wasClean}):this.changeState("closed"),this.unbindListeners(),this.socket=void 0}onMessage(r){this.emit("message",r)}onActivity(){this.emit("activity")}bindListeners(){this.socket.onopen=()=>{this.onOpen()},this.socket.onerror=r=>{this.onError(r)},this.socket.onclose=r=>{this.onClose(r)},this.socket.onmessage=r=>{this.onMessage(r)},this.supportsPing()&&(this.socket.onactivity=()=>{this.onActivity()})}unbindListeners(){this.socket&&(this.socket.onopen=void 0,this.socket.onerror=void 0,this.socket.onclose=void 0,this.socket.onmessage=void 0,this.supportsPing()&&(this.socket.onactivity=void 0))}changeState(r,s){this.state=r,this.timeline.info(this.buildTimelineMessage({state:r,params:s})),this.emit(r,s)}buildTimelineMessage(r){return G({cid:this.id},r)}}class Te{constructor(r){this.hooks=r}isSupported(r){return this.hooks.isSupported(r)}createConnection(r,s,l,f){return new vo(this.hooks,r,s,l,f)}}var _o=new Te({urls:fo,handlesActivityChecks:!1,supportsPing:!1,isInitialized:function(){return!!P.getWebSocketAPI()},isSupported:function(){return!!P.getWebSocketAPI()},getSocket:function(o){return P.createWebSocket(o)}}),rr={urls:po,handlesActivityChecks:!1,supportsPing:!0,isInitialized:function(){return!0}},ir=G({getSocket:function(o){return P.HTTPFactory.createStreamingSocket(o)}},rr),sr=G({getSocket:function(o){return P.HTTPFactory.createPollingSocket(o)}},rr),or={isSupported:function(){return P.isXHRSupported()}},bo=new Te(G({},ir,or)),yo=new Te(G({},sr,or)),wo={ws:_o,xhr_streaming:bo,xhr_polling:yo},Je=wo,xo=new Te({file:"sockjs",urls:go,handlesActivityChecks:!0,supportsPing:!1,isSupported:function(){return!0},isInitialized:function(){return window.SockJS!==void 0},getSocket:function(o,r){return new window.SockJS(o,null,{js_path:v.getPath("sockjs",{useTLS:r.useTLS}),ignore_null_origin:r.ignoreNullOrigin})},beforeOpen:function(o,r){o.send(JSON.stringify({path:r}))}}),ar={isSupported:function(o){var r=P.isXDRSupported(o.useTLS);return r}},So=new Te(G({},ir,ar)),Co=new Te(G({},sr,ar));Je.xdr_streaming=So,Je.xdr_polling=Co,Je.sockjs=xo;var Eo=Je;class To extends ie{constructor(){super();var r=this;window.addEventListener!==void 0&&(window.addEventListener("online",function(){r.emit("online")},!1),window.addEventListener("offline",function(){r.emit("offline")},!1))}isOnline(){return window.navigator.onLine===void 0?!0:window.navigator.onLine}}var ko=new To;class Ao{constructor(r,s,l){this.manager=r,this.transport=s,this.minPingDelay=l.minPingDelay,this.maxPingDelay=l.maxPingDelay,this.pingDelay=void 0}createConnection(r,s,l,f){f=G({},f,{activityTimeout:this.pingDelay});var m=this.transport.createConnection(r,s,l,f),w=null,T=function(){m.unbind("open",T),m.bind("closed",R),w=V.now()},R=I=>{if(m.unbind("closed",R),I.code===1002||I.code===1003)this.manager.reportDeath();else if(!I.wasClean&&w){var M=V.now()-w;M<2*this.maxPingDelay&&(this.manager.reportDeath(),this.pingDelay=Math.max(M/2,this.minPingDelay))}};return m.bind("open",T),m}isSupported(r){return this.manager.isAlive()&&this.transport.isSupported(r)}}const cr={decodeMessage:function(o){try{var r=JSON.parse(o.data),s=r.data;if(typeof s=="string")try{s=JSON.parse(r.data)}catch{}var l={event:r.event,channel:r.channel,data:s};return r.user_id&&(l.user_id=r.user_id),l}catch(f){throw{type:"MessageParseError",error:f,data:o.data}}},encodeMessage:function(o){return JSON.stringify(o)},processHandshake:function(o){var r=cr.decodeMessage(o);if(r.event==="pusher:connection_established"){if(!r.data.activity_timeout)throw"No activity timeout specified in handshake";return{action:"connected",id:r.data.socket_id,activityTimeout:r.data.activity_timeout*1e3}}else{if(r.event==="pusher:error")return{action:this.getCloseAction(r.data),error:this.getCloseError(r.data)};throw"Invalid handshake"}},getCloseAction:function(o){return o.code<4e3?o.code>=1002&&o.code<=1004?"backoff":null:o.code===4e3?"tls_only":o.code<4100?"refused":o.code<4200?"backoff":o.code<4300?"retry":"refused"},getCloseError:function(o){return o.code!==1e3&&o.code!==1001?{type:"PusherError",data:{code:o.code,message:o.reason||o.message}}:null}};var de=cr;class Ro extends ie{constructor(r,s){super(),this.id=r,this.transport=s,this.activityTimeout=s.activityTimeout,this.bindListeners()}handlesActivityChecks(){return this.transport.handlesActivityChecks()}send(r){return this.transport.send(r)}send_event(r,s,l){var f={event:r,data:s};return l&&(f.channel=l),B.debug("Event sent",f),this.send(de.encodeMessage(f))}ping(){this.transport.supportsPing()?this.transport.ping():this.send_event("pusher:ping",{})}close(){this.transport.close()}bindListeners(){var r={message:l=>{var f;try{f=de.decodeMessage(l)}catch(m){this.emit("error",{type:"MessageParseError",error:m,data:l.data})}if(f!==void 0){switch(B.debug("Event recd",f),f.event){case"pusher:error":this.emit("error",{type:"PusherError",data:f.data});break;case"pusher:ping":this.emit("ping");break;case"pusher:pong":this.emit("pong");break}this.emit("message",f)}},activity:()=>{this.emit("activity")},error:l=>{this.emit("error",l)},closed:l=>{s(),l&&l.code&&this.handleCloseEvent(l),this.transport=null,this.emit("closed")}},s=()=>{re(r,(l,f)=>{this.transport.unbind(f,l)})};re(r,(l,f)=>{this.transport.bind(f,l)})}handleCloseEvent(r){var s=de.getCloseAction(r),l=de.getCloseError(r);l&&this.emit("error",l),s&&this.emit(s,{action:s,error:l})}}class Po{constructor(r,s){this.transport=r,this.callback=s,this.bindListeners()}close(){this.unbindListeners(),this.transport.close()}bindListeners(){this.onMessage=r=>{this.unbindListeners();var s;try{s=de.processHandshake(r)}catch(l){this.finish("error",{error:l}),this.transport.close();return}s.action==="connected"?this.finish("connected",{connection:new Ro(s.id,this.transport),activityTimeout:s.activityTimeout}):(this.finish(s.action,{error:s.error}),this.transport.close())},this.onClosed=r=>{this.unbindListeners();var s=de.getCloseAction(r)||"backoff",l=de.getCloseError(r);this.finish(s,{error:l})},this.transport.bind("message",this.onMessage),this.transport.bind("closed",this.onClosed)}unbindListeners(){this.transport.unbind("message",this.onMessage),this.transport.unbind("closed",this.onClosed)}finish(r,s){this.callback(G({transport:this.transport,action:r},s))}}class Oo{constructor(r,s){this.timeline=r,this.options=s||{}}send(r,s){this.timeline.isEmpty()||this.timeline.send(P.TimelineTransport.getAgent(this,r),s)}}class wt extends ie{constructor(r,s){super(function(l,f){B.debug("No callbacks on "+r+" for "+l)}),this.name=r,this.pusher=s,this.subscribed=!1,this.subscriptionPending=!1,this.subscriptionCancelled=!1}authorize(r,s){return s(null,{auth:""})}trigger(r,s){if(r.indexOf("client-")!==0)throw new g("Event '"+r+"' does not start with 'client-'");if(!this.subscribed){var l=x.buildLogSuffix("triggeringClientEvents");B.warn(`Client event triggered before channel 'subscription_succeeded' event . ${l}`)}return this.pusher.send_event(r,s,this.name)}disconnect(){this.subscribed=!1,this.subscriptionPending=!1}handleEvent(r){var s=r.event,l=r.data;if(s==="pusher_internal:subscription_succeeded")this.handleSubscriptionSucceededEvent(r);else if(s==="pusher_internal:subscription_count")this.handleSubscriptionCountEvent(r);else if(s.indexOf("pusher_internal:")!==0){var f={};this.emit(s,l,f)}}handleSubscriptionSucceededEvent(r){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):this.emit("pusher:subscription_succeeded",r.data)}handleSubscriptionCountEvent(r){r.data.subscription_count&&(this.subscriptionCount=r.data.subscription_count),this.emit("pusher:subscription_count",r.data)}subscribe(){this.subscribed||(this.subscriptionPending=!0,this.subscriptionCancelled=!1,this.authorize(this.pusher.connection.socket_id,(r,s)=>{r?(this.subscriptionPending=!1,B.error(r.toString()),this.emit("pusher:subscription_error",Object.assign({},{type:"AuthError",error:r.message},r instanceof N?{status:r.status}:{}))):this.pusher.send_event("pusher:subscribe",{auth:s.auth,channel_data:s.channel_data,channel:this.name})}))}unsubscribe(){this.subscribed=!1,this.pusher.send_event("pusher:unsubscribe",{channel:this.name})}cancelSubscription(){this.subscriptionCancelled=!0}reinstateSubscription(){this.subscriptionCancelled=!1}}class xt extends wt{authorize(r,s){return this.pusher.config.channelAuthorizer({channelName:this.name,socketId:r},s)}}class Lo{constructor(){this.reset()}get(r){return Object.prototype.hasOwnProperty.call(this.members,r)?{id:r,info:this.members[r]}:null}each(r){re(this.members,(s,l)=>{r(this.get(l))})}setMyID(r){this.myID=r}onSubscription(r){this.members=r.presence.hash,this.count=r.presence.count,this.me=this.get(this.myID)}addMember(r){return this.get(r.user_id)===null&&this.count++,this.members[r.user_id]=r.user_info,this.get(r.user_id)}removeMember(r){var s=this.get(r.user_id);return s&&(delete this.members[r.user_id],this.count--),s}reset(){this.members={},this.count=0,this.myID=null,this.me=null}}var Io=function(o,r,s,l){function f(m){return m instanceof s?m:new s(function(w){w(m)})}return new(s||(s=Promise))(function(m,w){function T(M){try{I(l.next(M))}catch(U){w(U)}}function R(M){try{I(l.throw(M))}catch(U){w(U)}}function I(M){M.done?m(M.value):f(M.value).then(T,R)}I((l=l.apply(o,r||[])).next())})};class Mo extends xt{constructor(r,s){super(r,s),this.members=new Lo}authorize(r,s){super.authorize(r,(l,f)=>Io(this,void 0,void 0,function*(){if(!l)if(f=f,f.channel_data!=null){var m=JSON.parse(f.channel_data);this.members.setMyID(m.user_id)}else if(yield this.pusher.user.signinDonePromise,this.pusher.user.user_data!=null)this.members.setMyID(this.pusher.user.user_data.id);else{let w=x.buildLogSuffix("authorizationEndpoint");B.error(`Invalid auth response for channel '${this.name}', expected 'channel_data' field. ${w}, or the user should be signed in.`),s("Invalid auth response");return}s(l,f)}))}handleEvent(r){var s=r.event;if(s.indexOf("pusher_internal:")===0)this.handleInternalEvent(r);else{var l=r.data,f={};r.user_id&&(f.user_id=r.user_id),this.emit(s,l,f)}}handleInternalEvent(r){var s=r.event,l=r.data;switch(s){case"pusher_internal:subscription_succeeded":this.handleSubscriptionSucceededEvent(r);break;case"pusher_internal:subscription_count":this.handleSubscriptionCountEvent(r);break;case"pusher_internal:member_added":var f=this.members.addMember(l);this.emit("pusher:member_added",f);break;case"pusher_internal:member_removed":var m=this.members.removeMember(l);m&&this.emit("pusher:member_removed",m);break}}handleSubscriptionSucceededEvent(r){this.subscriptionPending=!1,this.subscribed=!0,this.subscriptionCancelled?this.pusher.unsubscribe(this.name):(this.members.onSubscription(r.data),this.emit("pusher:subscription_succeeded",this.members))}disconnect(){this.members.reset(),super.disconnect()}}var No=a(1),St=a(0);class jo extends xt{constructor(r,s,l){super(r,s),this.key=null,this.nacl=l}authorize(r,s){super.authorize(r,(l,f)=>{if(l){s(l,f);return}let m=f.shared_secret;if(!m){s(new Error(`No shared_secret key in auth payload for encrypted channel: ${this.name}`),null);return}this.key=Object(St.decode)(m),delete f.shared_secret,s(null,f)})}trigger(r,s){throw new L("Client events are not currently supported for encrypted channels")}handleEvent(r){var s=r.event,l=r.data;if(s.indexOf("pusher_internal:")===0||s.indexOf("pusher:")===0){super.handleEvent(r);return}this.handleEncryptedEvent(s,l)}handleEncryptedEvent(r,s){if(!this.key){B.debug("Received encrypted event before key has been retrieved from the authEndpoint");return}if(!s.ciphertext||!s.nonce){B.error("Unexpected format for encrypted event, expected object with `ciphertext` and `nonce` fields, got: "+s);return}let l=Object(St.decode)(s.ciphertext);if(l.length<this.nacl.secretbox.overheadLength){B.error(`Expected encrypted event ciphertext length to be ${this.nacl.secretbox.overheadLength}, got: ${l.length}`);return}let f=Object(St.decode)(s.nonce);if(f.length<this.nacl.secretbox.nonceLength){B.error(`Expected encrypted event nonce length to be ${this.nacl.secretbox.nonceLength}, got: ${f.length}`);return}let m=this.nacl.secretbox.open(l,f,this.key);if(m===null){B.debug("Failed to decrypt an event, probably because it was encrypted with a different key. Fetching a new key from the authEndpoint..."),this.authorize(this.pusher.connection.socket_id,(w,T)=>{if(w){B.error(`Failed to make a request to the authEndpoint: ${T}. Unable to fetch new key, so dropping encrypted event`);return}if(m=this.nacl.secretbox.open(l,f,this.key),m===null){B.error("Failed to decrypt event with new key. Dropping encrypted event");return}this.emit(r,this.getDataToEmit(m))});return}this.emit(r,this.getDataToEmit(m))}getDataToEmit(r){let s=Object(No.decode)(r);try{return JSON.parse(s)}catch{return s}}}class qo extends ie{constructor(r,s){super(),this.state="initialized",this.connection=null,this.key=r,this.options=s,this.timeline=this.options.timeline,this.usingTLS=this.options.useTLS,this.errorCallbacks=this.buildErrorCallbacks(),this.connectionCallbacks=this.buildConnectionCallbacks(this.errorCallbacks),this.handshakeCallbacks=this.buildHandshakeCallbacks(this.errorCallbacks);var l=P.getNetwork();l.bind("online",()=>{this.timeline.info({netinfo:"online"}),(this.state==="connecting"||this.state==="unavailable")&&this.retryIn(0)}),l.bind("offline",()=>{this.timeline.info({netinfo:"offline"}),this.connection&&this.sendActivityCheck()}),this.updateStrategy()}connect(){if(!(this.connection||this.runner)){if(!this.strategy.isSupported()){this.updateState("failed");return}this.updateState("connecting"),this.startConnecting(),this.setUnavailableTimer()}}send(r){return this.connection?this.connection.send(r):!1}send_event(r,s,l){return this.connection?this.connection.send_event(r,s,l):!1}disconnect(){this.disconnectInternally(),this.updateState("disconnected")}isUsingTLS(){return this.usingTLS}startConnecting(){var r=(s,l)=>{s?this.runner=this.strategy.connect(0,r):l.action==="error"?(this.emit("error",{type:"HandshakeError",error:l.error}),this.timeline.error({handshakeError:l.error})):(this.abortConnecting(),this.handshakeCallbacks[l.action](l))};this.runner=this.strategy.connect(0,r)}abortConnecting(){this.runner&&(this.runner.abort(),this.runner=null)}disconnectInternally(){if(this.abortConnecting(),this.clearRetryTimer(),this.clearUnavailableTimer(),this.connection){var r=this.abandonConnection();r.close()}}updateStrategy(){this.strategy=this.options.getStrategy({key:this.key,timeline:this.timeline,useTLS:this.usingTLS})}retryIn(r){this.timeline.info({action:"retry",delay:r}),r>0&&this.emit("connecting_in",Math.round(r/1e3)),this.retryTimer=new he(r||0,()=>{this.disconnectInternally(),this.connect()})}clearRetryTimer(){this.retryTimer&&(this.retryTimer.ensureAborted(),this.retryTimer=null)}setUnavailableTimer(){this.unavailableTimer=new he(this.options.unavailableTimeout,()=>{this.updateState("unavailable")})}clearUnavailableTimer(){this.unavailableTimer&&this.unavailableTimer.ensureAborted()}sendActivityCheck(){this.stopActivityCheck(),this.connection.ping(),this.activityTimer=new he(this.options.pongTimeout,()=>{this.timeline.error({pong_timed_out:this.options.pongTimeout}),this.retryIn(0)})}resetActivityCheck(){this.stopActivityCheck(),this.connection&&!this.connection.handlesActivityChecks()&&(this.activityTimer=new he(this.activityTimeout,()=>{this.sendActivityCheck()}))}stopActivityCheck(){this.activityTimer&&this.activityTimer.ensureAborted()}buildConnectionCallbacks(r){return G({},r,{message:s=>{this.resetActivityCheck(),this.emit("message",s)},ping:()=>{this.send_event("pusher:pong",{})},activity:()=>{this.resetActivityCheck()},error:s=>{this.emit("error",s)},closed:()=>{this.abandonConnection(),this.shouldRetry()&&this.retryIn(1e3)}})}buildHandshakeCallbacks(r){return G({},r,{connected:s=>{this.activityTimeout=Math.min(this.options.activityTimeout,s.activityTimeout,s.connection.activityTimeout||1/0),this.clearUnavailableTimer(),this.setConnection(s.connection),this.socket_id=this.connection.id,this.updateState("connected",{socket_id:this.socket_id})}})}buildErrorCallbacks(){let r=s=>l=>{l.error&&this.emit("error",{type:"WebSocketError",error:l.error}),s(l)};return{tls_only:r(()=>{this.usingTLS=!0,this.updateStrategy(),this.retryIn(0)}),refused:r(()=>{this.disconnect()}),backoff:r(()=>{this.retryIn(1e3)}),retry:r(()=>{this.retryIn(0)})}}setConnection(r){this.connection=r;for(var s in this.connectionCallbacks)this.connection.bind(s,this.connectionCallbacks[s]);this.resetActivityCheck()}abandonConnection(){if(this.connection){this.stopActivityCheck();for(var r in this.connectionCallbacks)this.connection.unbind(r,this.connectionCallbacks[r]);var s=this.connection;return this.connection=null,s}}updateState(r,s){var l=this.state;if(this.state=r,l!==r){var f=r;f==="connected"&&(f+=" with new socket ID "+s.socket_id),B.debug("State changed",l+" -> "+f),this.timeline.info({state:r,params:s}),this.emit("state_change",{previous:l,current:r}),this.emit(r,s)}}shouldRetry(){return this.state==="connecting"||this.state==="connected"}}class Do{constructor(){this.channels={}}add(r,s){return this.channels[r]||(this.channels[r]=Bo(r,s)),this.channels[r]}all(){return Qs(this.channels)}find(r){return this.channels[r]}remove(r){var s=this.channels[r];return delete this.channels[r],s}disconnect(){re(this.channels,function(r){r.disconnect()})}}function Bo(o,r){if(o.indexOf("private-encrypted-")===0){if(r.config.nacl)return se.createEncryptedChannel(o,r,r.config.nacl);let s="Tried to subscribe to a private-encrypted- channel but no nacl implementation available",l=x.buildLogSuffix("encryptedChannelSupport");throw new L(`${s}. ${l}`)}else{if(o.indexOf("private-")===0)return se.createPrivateChannel(o,r);if(o.indexOf("presence-")===0)return se.createPresenceChannel(o,r);if(o.indexOf("#")===0)throw new b('Cannot create a channel with name "'+o+'".');return se.createChannel(o,r)}}var Fo={createChannels(){return new Do},createConnectionManager(o,r){return new qo(o,r)},createChannel(o,r){return new wt(o,r)},createPrivateChannel(o,r){return new xt(o,r)},createPresenceChannel(o,r){return new Mo(o,r)},createEncryptedChannel(o,r,s){return new jo(o,r,s)},createTimelineSender(o,r){return new Oo(o,r)},createHandshake(o,r){return new Po(o,r)},createAssistantToTheTransportManager(o,r,s){return new Ao(o,r,s)}},se=Fo;class ur{constructor(r){this.options=r||{},this.livesLeft=this.options.lives||1/0}getAssistant(r){return se.createAssistantToTheTransportManager(this,r,{minPingDelay:this.options.minPingDelay,maxPingDelay:this.options.maxPingDelay})}isAlive(){return this.livesLeft>0}reportDeath(){this.livesLeft-=1}}class fe{constructor(r,s){this.strategies=r,this.loop=!!s.loop,this.failFast=!!s.failFast,this.timeout=s.timeout,this.timeoutLimit=s.timeoutLimit}isSupported(){return nr(this.strategies,V.method("isSupported"))}connect(r,s){var l=this.strategies,f=0,m=this.timeout,w=null,T=(R,I)=>{I?s(null,I):(f=f+1,this.loop&&(f=f%l.length),f<l.length?(m&&(m=m*2,this.timeoutLimit&&(m=Math.min(m,this.timeoutLimit))),w=this.tryStrategy(l[f],r,{timeout:m,failFast:this.failFast},T)):s(!0))};return w=this.tryStrategy(l[f],r,{timeout:m,failFast:this.failFast},T),{abort:function(){w.abort()},forceMinPriority:function(R){r=R,w&&w.forceMinPriority(R)}}}tryStrategy(r,s,l,f){var m=null,w=null;return l.timeout>0&&(m=new he(l.timeout,function(){w.abort(),f(!0)})),w=r.connect(s,function(T,R){T&&m&&m.isRunning()&&!l.failFast||(m&&m.ensureAborted(),f(T,R))}),{abort:function(){m&&m.ensureAborted(),w.abort()},forceMinPriority:function(T){w.forceMinPriority(T)}}}}class Ct{constructor(r){this.strategies=r}isSupported(){return nr(this.strategies,V.method("isSupported"))}connect(r,s){return $o(this.strategies,r,function(l,f){return function(m,w){if(f[l].error=m,m){Uo(f)&&s(!0);return}Me(f,function(T){T.forceMinPriority(w.transport.priority)}),s(null,w)}})}}function $o(o,r,s){var l=Zn(o,function(f,m,w,T){return f.connect(r,s(m,T))});return{abort:function(){Me(l,Ho)},forceMinPriority:function(f){Me(l,function(m){m.forceMinPriority(f)})}}}function Uo(o){return eo(o,function(r){return!!r.error})}function Ho(o){!o.error&&!o.aborted&&(o.abort(),o.aborted=!0)}class zo{constructor(r,s,l){this.strategy=r,this.transports=s,this.ttl=l.ttl||1800*1e3,this.usingTLS=l.useTLS,this.timeline=l.timeline}isSupported(){return this.strategy.isSupported()}connect(r,s){var l=this.usingTLS,f=Wo(l),m=f&&f.cacheSkipCount?f.cacheSkipCount:0,w=[this.strategy];if(f&&f.timestamp+this.ttl>=V.now()){var T=this.transports[f.transport];T&&(["ws","wss"].includes(f.transport)||m>3?(this.timeline.info({cached:!0,transport:f.transport,latency:f.latency}),w.push(new fe([T],{timeout:f.latency*2+1e3,failFast:!0}))):m++)}var R=V.now(),I=w.pop().connect(r,function M(U,Ye){U?(lr(l),w.length>0?(R=V.now(),I=w.pop().connect(r,M)):s(U)):(Xo(l,Ye.transport.name,V.now()-R,m),s(null,Ye))});return{abort:function(){I.abort()},forceMinPriority:function(M){r=M,I&&I.forceMinPriority(M)}}}}function Et(o){return"pusherTransport"+(o?"TLS":"NonTLS")}function Wo(o){var r=P.getLocalStorage();if(r)try{var s=r[Et(o)];if(s)return JSON.parse(s)}catch{lr(o)}return null}function Xo(o,r,s,l){var f=P.getLocalStorage();if(f)try{f[Et(o)]=Ve({timestamp:V.now(),transport:r,latency:s,cacheSkipCount:l})}catch{}}function lr(o){var r=P.getLocalStorage();if(r)try{delete r[Et(o)]}catch{}}class Ge{constructor(r,{delay:s}){this.strategy=r,this.options={delay:s}}isSupported(){return this.strategy.isSupported()}connect(r,s){var l=this.strategy,f,m=new he(this.options.delay,function(){f=l.connect(r,s)});return{abort:function(){m.ensureAborted(),f&&f.abort()},forceMinPriority:function(w){r=w,f&&f.forceMinPriority(w)}}}}class Ne{constructor(r,s,l){this.test=r,this.trueBranch=s,this.falseBranch=l}isSupported(){var r=this.test()?this.trueBranch:this.falseBranch;return r.isSupported()}connect(r,s){var l=this.test()?this.trueBranch:this.falseBranch;return l.connect(r,s)}}class Ko{constructor(r){this.strategy=r}isSupported(){return this.strategy.isSupported()}connect(r,s){var l=this.strategy.connect(r,function(f,m){m&&l.abort(),s(f,m)});return l}}function je(o){return function(){return o.isSupported()}}var Vo=function(o,r,s){var l={};function f(wr,Ka,Va,Ja,Ga){var xr=s(o,wr,Ka,Va,Ja,Ga);return l[wr]=xr,xr}var m=Object.assign({},r,{hostNonTLS:o.wsHost+":"+o.wsPort,hostTLS:o.wsHost+":"+o.wssPort,httpPath:o.wsPath}),w=Object.assign({},m,{useTLS:!0}),T=Object.assign({},r,{hostNonTLS:o.httpHost+":"+o.httpPort,hostTLS:o.httpHost+":"+o.httpsPort,httpPath:o.httpPath}),R={loop:!0,timeout:15e3,timeoutLimit:6e4},I=new ur({minPingDelay:1e4,maxPingDelay:o.activityTimeout}),M=new ur({lives:2,minPingDelay:1e4,maxPingDelay:o.activityTimeout}),U=f("ws","ws",3,m,I),Ye=f("wss","ws",3,w,I),Ua=f("sockjs","sockjs",1,T),gr=f("xhr_streaming","xhr_streaming",1,T,M),Ha=f("xdr_streaming","xdr_streaming",1,T,M),mr=f("xhr_polling","xhr_polling",1,T),za=f("xdr_polling","xdr_polling",1,T),vr=new fe([U],R),Wa=new fe([Ye],R),Xa=new fe([Ua],R),_r=new fe([new Ne(je(gr),gr,Ha)],R),br=new fe([new Ne(je(mr),mr,za)],R),yr=new fe([new Ne(je(_r),new Ct([_r,new Ge(br,{delay:4e3})]),br)],R),Rt=new Ne(je(yr),yr,Xa),Pt;return r.useTLS?Pt=new Ct([vr,new Ge(Rt,{delay:2e3})]):Pt=new Ct([vr,new Ge(Wa,{delay:2e3}),new Ge(Rt,{delay:5e3})]),new zo(new Ko(new Ne(je(U),Pt,Rt)),l,{ttl:18e5,timeline:r.timeline,useTLS:r.useTLS})},Jo=Vo,Go=(function(){var o=this;o.timeline.info(o.buildTimelineMessage({transport:o.name+(o.options.useTLS?"s":"")})),o.hooks.isInitialized()?o.changeState("initialized"):o.hooks.file?(o.changeState("initializing"),v.load(o.hooks.file,{useTLS:o.options.useTLS},function(r,s){o.hooks.isInitialized()?(o.changeState("initialized"),s(!0)):(r&&o.onError(r),o.onClose(),s(!1))})):o.onClose()}),Qo={getRequest:function(o){var r=new window.XDomainRequest;return r.ontimeout=function(){o.emit("error",new E),o.close()},r.onerror=function(s){o.emit("error",s),o.close()},r.onprogress=function(){r.responseText&&r.responseText.length>0&&o.onChunk(200,r.responseText)},r.onload=function(){r.responseText&&r.responseText.length>0&&o.onChunk(200,r.responseText),o.emit("finished",200),o.close()},r},abortRequest:function(o){o.ontimeout=o.onerror=o.onprogress=o.onload=null,o.abort()}},Yo=Qo;const Zo=256*1024;class ea extends ie{constructor(r,s,l){super(),this.hooks=r,this.method=s,this.url=l}start(r){this.position=0,this.xhr=this.hooks.getRequest(this),this.unloader=()=>{this.close()},P.addUnloadListener(this.unloader),this.xhr.open(this.method,this.url,!0),this.xhr.setRequestHeader&&this.xhr.setRequestHeader("Content-Type","application/json"),this.xhr.send(r)}close(){this.unloader&&(P.removeUnloadListener(this.unloader),this.unloader=null),this.xhr&&(this.hooks.abortRequest(this.xhr),this.xhr=null)}onChunk(r,s){for(;;){var l=this.advanceBuffer(s);if(l)this.emit("chunk",{status:r,data:l});else break}this.isBufferTooLong(s)&&this.emit("buffer_too_long")}advanceBuffer(r){var s=r.slice(this.position),l=s.indexOf(`
`);return l!==-1?(this.position+=l+1,s.slice(0,l)):null}isBufferTooLong(r){return this.position===r.length&&r.length>Zo}}var Tt;(function(o){o[o.CONNECTING=0]="CONNECTING",o[o.OPEN=1]="OPEN",o[o.CLOSED=3]="CLOSED"})(Tt||(Tt={}));var pe=Tt,ta=1;class na{constructor(r,s){this.hooks=r,this.session=dr(1e3)+"/"+oa(8),this.location=ra(s),this.readyState=pe.CONNECTING,this.openStream()}send(r){return this.sendRaw(JSON.stringify([r]))}ping(){this.hooks.sendHeartbeat(this)}close(r,s){this.onClose(r,s,!0)}sendRaw(r){if(this.readyState===pe.OPEN)try{return P.createSocketRequest("POST",hr(ia(this.location,this.session))).start(r),!0}catch{return!1}else return!1}reconnect(){this.closeStream(),this.openStream()}onClose(r,s,l){this.closeStream(),this.readyState=pe.CLOSED,this.onclose&&this.onclose({code:r,reason:s,wasClean:l})}onChunk(r){if(r.status===200){this.readyState===pe.OPEN&&this.onActivity();var s,l=r.data.slice(0,1);switch(l){case"o":s=JSON.parse(r.data.slice(1)||"{}"),this.onOpen(s);break;case"a":s=JSON.parse(r.data.slice(1)||"[]");for(var f=0;f<s.length;f++)this.onEvent(s[f]);break;case"m":s=JSON.parse(r.data.slice(1)||"null"),this.onEvent(s);break;case"h":this.hooks.onHeartbeat(this);break;case"c":s=JSON.parse(r.data.slice(1)||"[]"),this.onClose(s[0],s[1],!0);break}}}onOpen(r){this.readyState===pe.CONNECTING?(r&&r.hostname&&(this.location.base=sa(this.location.base,r.hostname)),this.readyState=pe.OPEN,this.onopen&&this.onopen()):this.onClose(1006,"Server lost session",!0)}onEvent(r){this.readyState===pe.OPEN&&this.onmessage&&this.onmessage({data:r})}onActivity(){this.onactivity&&this.onactivity()}onError(r){this.onerror&&this.onerror(r)}openStream(){this.stream=P.createSocketRequest("POST",hr(this.hooks.getReceiveURL(this.location,this.session))),this.stream.bind("chunk",r=>{this.onChunk(r)}),this.stream.bind("finished",r=>{this.hooks.onFinished(this,r)}),this.stream.bind("buffer_too_long",()=>{this.reconnect()});try{this.stream.start()}catch(r){V.defer(()=>{this.onError(r),this.onClose(1006,"Could not start streaming",!1)})}}closeStream(){this.stream&&(this.stream.unbind_all(),this.stream.close(),this.stream=null)}}function ra(o){var r=/([^\?]*)\/*(\??.*)/.exec(o);return{base:r[1],queryString:r[2]}}function ia(o,r){return o.base+"/"+r+"/xhr_send"}function hr(o){var r=o.indexOf("?")===-1?"?":"&";return o+r+"t="+ +new Date+"&n="+ta++}function sa(o,r){var s=/(https?:\/\/)([^\/:]+)((\/|:)?.*)/.exec(o);return s[1]+r+s[3]}function dr(o){return P.randomInt(o)}function oa(o){for(var r=[],s=0;s<o;s++)r.push(dr(32).toString(32));return r.join("")}var aa=na,ca={getReceiveURL:function(o,r){return o.base+"/"+r+"/xhr_streaming"+o.queryString},onHeartbeat:function(o){o.sendRaw("[]")},sendHeartbeat:function(o){o.sendRaw("[]")},onFinished:function(o,r){o.onClose(1006,"Connection interrupted ("+r+")",!1)}},ua=ca,la={getReceiveURL:function(o,r){return o.base+"/"+r+"/xhr"+o.queryString},onHeartbeat:function(){},sendHeartbeat:function(o){o.sendRaw("[]")},onFinished:function(o,r){r===200?o.reconnect():o.onClose(1006,"Connection interrupted ("+r+")",!1)}},ha=la,da={getRequest:function(o){var r=P.getXHRAPI(),s=new r;return s.onreadystatechange=s.onprogress=function(){switch(s.readyState){case 3:s.responseText&&s.responseText.length>0&&o.onChunk(s.status,s.responseText);break;case 4:s.responseText&&s.responseText.length>0&&o.onChunk(s.status,s.responseText),o.emit("finished",s.status),o.close();break}},s},abortRequest:function(o){o.onreadystatechange=null,o.abort()}},fa=da,pa={createStreamingSocket(o){return this.createSocket(ua,o)},createPollingSocket(o){return this.createSocket(ha,o)},createSocket(o,r){return new aa(o,r)},createXHR(o,r){return this.createRequest(fa,o,r)},createRequest(o,r,s){return new ea(o,r,s)}},fr=pa;fr.createXDR=function(o,r){return this.createRequest(Yo,o,r)};var ga=fr,ma={nextAuthCallbackID:1,auth_callbacks:{},ScriptReceivers:u,DependenciesReceivers:_,getDefaultStrategy:Jo,Transports:Eo,transportConnectionInitializer:Go,HTTPFactory:ga,TimelineTransport:ho,getXHRAPI(){return window.XMLHttpRequest},getWebSocketAPI(){return window.WebSocket||window.MozWebSocket},setup(o){window.Pusher=o;var r=()=>{this.onDocumentBody(o.ready)};window.JSON?r():v.load("json2",{},r)},getDocument(){return document},getProtocol(){return this.getDocument().location.protocol},getAuthorizers(){return{ajax:X,jsonp:oo}},onDocumentBody(o){document.body?o():setTimeout(()=>{this.onDocumentBody(o)},0)},createJSONPRequest(o,r){return new co(o,r)},createScriptRequest(o){return new ao(o)},getLocalStorage(){try{return window.localStorage}catch{return}},createXHR(){return this.getXHRAPI()?this.createXMLHttpRequest():this.createMicrosoftXHR()},createXMLHttpRequest(){var o=this.getXHRAPI();return new o},createMicrosoftXHR(){return new ActiveXObject("Microsoft.XMLHTTP")},getNetwork(){return ko},createWebSocket(o){var r=this.getWebSocketAPI();return new r(o)},createSocketRequest(o,r){if(this.isXHRSupported())return this.HTTPFactory.createXHR(o,r);if(this.isXDRSupported(r.indexOf("https:")===0))return this.HTTPFactory.createXDR(o,r);throw"Cross-origin HTTP requests are not supported"},isXHRSupported(){var o=this.getXHRAPI();return!!o&&new o().withCredentials!==void 0},isXDRSupported(o){var r=o?"https:":"http:",s=this.getProtocol();return!!window.XDomainRequest&&s===r},addUnloadListener(o){window.addEventListener!==void 0?window.addEventListener("unload",o,!1):window.attachEvent!==void 0&&window.attachEvent("onunload",o)},removeUnloadListener(o){window.addEventListener!==void 0?window.removeEventListener("unload",o,!1):window.detachEvent!==void 0&&window.detachEvent("onunload",o)},randomInt(o){return Math.floor(function(){return(window.crypto||window.msCrypto).getRandomValues(new Uint32Array(1))[0]/Math.pow(2,32)}()*o)}},P=ma,kt;(function(o){o[o.ERROR=3]="ERROR",o[o.INFO=6]="INFO",o[o.DEBUG=7]="DEBUG"})(kt||(kt={}));var Qe=kt;class va{constructor(r,s,l){this.key=r,this.session=s,this.events=[],this.options=l||{},this.sent=0,this.uniqueID=0}log(r,s){r<=this.options.level&&(this.events.push(G({},s,{timestamp:V.now()})),this.options.limit&&this.events.length>this.options.limit&&this.events.shift())}error(r){this.log(Qe.ERROR,r)}info(r){this.log(Qe.INFO,r)}debug(r){this.log(Qe.DEBUG,r)}isEmpty(){return this.events.length===0}send(r,s){var l=G({session:this.session,bundle:this.sent+1,key:this.key,lib:"js",version:this.options.version,cluster:this.options.cluster,features:this.options.features,timeline:this.events},this.options.params);return this.events=[],r(l,(f,m)=>{f||this.sent++,s&&s(f,m)}),!0}generateUniqueID(){return this.uniqueID++,this.uniqueID}}class _a{constructor(r,s,l,f){this.name=r,this.priority=s,this.transport=l,this.options=f||{}}isSupported(){return this.transport.isSupported({useTLS:this.options.useTLS})}connect(r,s){if(this.isSupported()){if(this.priority<r)return pr(new A,s)}else return pr(new y,s);var l=!1,f=this.transport.createConnection(this.name,this.priority,this.options.key,this.options),m=null,w=function(){f.unbind("initialized",w),f.connect()},T=function(){m=se.createHandshake(f,function(U){l=!0,M(),s(null,U)})},R=function(U){M(),s(U)},I=function(){M();var U;U=Ve(f),s(new O(U))},M=function(){f.unbind("initialized",w),f.unbind("open",T),f.unbind("error",R),f.unbind("closed",I)};return f.bind("initialized",w),f.bind("open",T),f.bind("error",R),f.bind("closed",I),f.initialize(),{abort:()=>{l||(M(),m?m.close():f.close())},forceMinPriority:U=>{l||this.priority<U&&(m?m.close():f.close())}}}}function pr(o,r){return V.defer(function(){r(o)}),{abort:function(){},forceMinPriority:function(){}}}const{Transports:ba}=P;var ya=function(o,r,s,l,f,m){var w=ba[s];if(!w)throw new q(s);var T=(!o.enabledTransports||Qn(o.enabledTransports,r)!==-1)&&(!o.disabledTransports||Qn(o.disabledTransports,r)===-1),R;return T?(f=Object.assign({ignoreNullOrigin:o.ignoreNullOrigin},f),R=new _a(r,l,m?m.getAssistant(w):w,f)):R=wa,R},wa={isSupported:function(){return!1},connect:function(o,r){var s=V.defer(function(){r(new y)});return{abort:function(){s.ensureAborted()},forceMinPriority:function(){}}}};function xa(o){if(o==null)throw"You must pass an options object";if(o.cluster==null)throw"Options object must provide a cluster";"disableStats"in o&&B.warn("The disableStats option is deprecated in favor of enableStats")}const Sa=(o,r)=>{var s="socket_id="+encodeURIComponent(o.socketId);for(var l in r.params)s+="&"+encodeURIComponent(l)+"="+encodeURIComponent(r.params[l]);if(r.paramsProvider!=null){let f=r.paramsProvider();for(var l in f)s+="&"+encodeURIComponent(l)+"="+encodeURIComponent(f[l])}return s};var Ca=o=>{if(typeof P.getAuthorizers()[o.transport]>"u")throw`'${o.transport}' is not a recognized auth transport`;return(r,s)=>{const l=Sa(r,o);P.getAuthorizers()[o.transport](P,l,o,k.UserAuthentication,s)}};const Ea=(o,r)=>{var s="socket_id="+encodeURIComponent(o.socketId);s+="&channel_name="+encodeURIComponent(o.channelName);for(var l in r.params)s+="&"+encodeURIComponent(l)+"="+encodeURIComponent(r.params[l]);if(r.paramsProvider!=null){let f=r.paramsProvider();for(var l in f)s+="&"+encodeURIComponent(l)+"="+encodeURIComponent(f[l])}return s};var Ta=o=>{if(typeof P.getAuthorizers()[o.transport]>"u")throw`'${o.transport}' is not a recognized auth transport`;return(r,s)=>{const l=Ea(r,o);P.getAuthorizers()[o.transport](P,l,o,k.ChannelAuthorization,s)}};const ka=(o,r,s)=>{const l={authTransport:r.transport,authEndpoint:r.endpoint,auth:{params:r.params,headers:r.headers}};return(f,m)=>{const w=o.channel(f.channelName);s(w,l).authorize(f.socketId,m)}};function Aa(o,r){let s={activityTimeout:o.activityTimeout||d.activityTimeout,cluster:o.cluster,httpPath:o.httpPath||d.httpPath,httpPort:o.httpPort||d.httpPort,httpsPort:o.httpsPort||d.httpsPort,pongTimeout:o.pongTimeout||d.pongTimeout,statsHost:o.statsHost||d.stats_host,unavailableTimeout:o.unavailableTimeout||d.unavailableTimeout,wsPath:o.wsPath||d.wsPath,wsPort:o.wsPort||d.wsPort,wssPort:o.wssPort||d.wssPort,enableStats:Ia(o),httpHost:Ra(o),useTLS:La(o),wsHost:Pa(o),userAuthenticator:Ma(o),channelAuthorizer:ja(o,r)};return"disabledTransports"in o&&(s.disabledTransports=o.disabledTransports),"enabledTransports"in o&&(s.enabledTransports=o.enabledTransports),"ignoreNullOrigin"in o&&(s.ignoreNullOrigin=o.ignoreNullOrigin),"timelineParams"in o&&(s.timelineParams=o.timelineParams),"nacl"in o&&(s.nacl=o.nacl),s}function Ra(o){return o.httpHost?o.httpHost:o.cluster?`sockjs-${o.cluster}.pusher.com`:d.httpHost}function Pa(o){return o.wsHost?o.wsHost:Oa(o.cluster)}function Oa(o){return`ws-${o}.pusher.com`}function La(o){return P.getProtocol()==="https:"?!0:o.forceTLS!==!1}function Ia(o){return"enableStats"in o?o.enableStats:"disableStats"in o?!o.disableStats:!1}function Ma(o){const r=Object.assign(Object.assign({},d.userAuthentication),o.userAuthentication);return"customHandler"in r&&r.customHandler!=null?r.customHandler:Ca(r)}function Na(o,r){let s;return"channelAuthorization"in o?s=Object.assign(Object.assign({},d.channelAuthorization),o.channelAuthorization):(s={transport:o.authTransport||d.authTransport,endpoint:o.authEndpoint||d.authEndpoint},"auth"in o&&("params"in o.auth&&(s.params=o.auth.params),"headers"in o.auth&&(s.headers=o.auth.headers)),"authorizer"in o&&(s.customHandler=ka(r,s,o.authorizer))),s}function ja(o,r){const s=Na(o,r);return"customHandler"in s&&s.customHandler!=null?s.customHandler:Ta(s)}class qa extends ie{constructor(r){super(function(s,l){B.debug(`No callbacks on watchlist events for ${s}`)}),this.pusher=r,this.bindWatchlistInternalEvent()}handleEvent(r){r.data.events.forEach(s=>{this.emit(s.name,s)})}bindWatchlistInternalEvent(){this.pusher.connection.bind("message",r=>{var s=r.event;s==="pusher_internal:watchlist_events"&&this.handleEvent(r)})}}function Da(){let o,r;return{promise:new Promise((l,f)=>{o=l,r=f}),resolve:o,reject:r}}var Ba=Da;class Fa extends ie{constructor(r){super(function(s,l){B.debug("No callbacks on user for "+s)}),this.signin_requested=!1,this.user_data=null,this.serverToUserChannel=null,this.signinDonePromise=null,this._signinDoneResolve=null,this._onAuthorize=(s,l)=>{if(s){B.warn(`Error during signin: ${s}`),this._cleanup();return}this.pusher.send_event("pusher:signin",{auth:l.auth,user_data:l.user_data})},this.pusher=r,this.pusher.connection.bind("state_change",({previous:s,current:l})=>{s!=="connected"&&l==="connected"&&this._signin(),s==="connected"&&l!=="connected"&&(this._cleanup(),this._newSigninPromiseIfNeeded())}),this.watchlist=new qa(r),this.pusher.connection.bind("message",s=>{var l=s.event;l==="pusher:signin_success"&&this._onSigninSuccess(s.data),this.serverToUserChannel&&this.serverToUserChannel.name===s.channel&&this.serverToUserChannel.handleEvent(s)})}signin(){this.signin_requested||(this.signin_requested=!0,this._signin())}_signin(){this.signin_requested&&(this._newSigninPromiseIfNeeded(),this.pusher.connection.state==="connected"&&this.pusher.config.userAuthenticator({socketId:this.pusher.connection.socket_id},this._onAuthorize))}_onSigninSuccess(r){try{this.user_data=JSON.parse(r.user_data)}catch{B.error(`Failed parsing user data after signin: ${r.user_data}`),this._cleanup();return}if(typeof this.user_data.id!="string"||this.user_data.id===""){B.error(`user_data doesn't contain an id. user_data: ${this.user_data}`),this._cleanup();return}this._signinDoneResolve(),this._subscribeChannels()}_subscribeChannels(){const r=s=>{s.subscriptionPending&&s.subscriptionCancelled?s.reinstateSubscription():!s.subscriptionPending&&this.pusher.connection.state==="connected"&&s.subscribe()};this.serverToUserChannel=new wt(`#server-to-user-${this.user_data.id}`,this.pusher),this.serverToUserChannel.bind_global((s,l)=>{s.indexOf("pusher_internal:")===0||s.indexOf("pusher:")===0||this.emit(s,l)}),r(this.serverToUserChannel)}_cleanup(){this.user_data=null,this.serverToUserChannel&&(this.serverToUserChannel.unbind_all(),this.serverToUserChannel.disconnect(),this.serverToUserChannel=null),this.signin_requested&&this._signinDoneResolve()}_newSigninPromiseIfNeeded(){if(!this.signin_requested||this.signinDonePromise&&!this.signinDonePromise.done)return;const{promise:r,resolve:s}=Ba();r.done=!1;const l=()=>{r.done=!0};r.then(l).catch(l),this.signinDonePromise=r,this._signinDoneResolve=s}}class K{static ready(){K.isReady=!0;for(var r=0,s=K.instances.length;r<s;r++)K.instances[r].connect()}static getClientFeatures(){return Yn(tr({ws:P.Transports.ws},function(r){return r.isSupported({})}))}constructor(r,s){$a(r),xa(s),this.key=r,this.config=Aa(s,this),this.channels=se.createChannels(),this.global_emitter=new ie,this.sessionID=P.randomInt(1e9),this.timeline=new va(this.key,this.sessionID,{cluster:this.config.cluster,features:K.getClientFeatures(),params:this.config.timelineParams||{},limit:50,level:Qe.INFO,version:d.VERSION}),this.config.enableStats&&(this.timelineSender=se.createTimelineSender(this.timeline,{host:this.config.statsHost,path:"/timeline/v2/"+P.TimelineTransport.name}));var l=f=>P.getDefaultStrategy(this.config,f,ya);this.connection=se.createConnectionManager(this.key,{getStrategy:l,timeline:this.timeline,activityTimeout:this.config.activityTimeout,pongTimeout:this.config.pongTimeout,unavailableTimeout:this.config.unavailableTimeout,useTLS:!!this.config.useTLS}),this.connection.bind("connected",()=>{this.subscribeAll(),this.timelineSender&&this.timelineSender.send(this.connection.isUsingTLS())}),this.connection.bind("message",f=>{var m=f.event,w=m.indexOf("pusher_internal:")===0;if(f.channel){var T=this.channel(f.channel);T&&T.handleEvent(f)}w||this.global_emitter.emit(f.event,f.data)}),this.connection.bind("connecting",()=>{this.channels.disconnect()}),this.connection.bind("disconnected",()=>{this.channels.disconnect()}),this.connection.bind("error",f=>{B.warn(f)}),K.instances.push(this),this.timeline.info({instances:K.instances.length}),this.user=new Fa(this),K.isReady&&this.connect()}channel(r){return this.channels.find(r)}allChannels(){return this.channels.all()}connect(){if(this.connection.connect(),this.timelineSender&&!this.timelineSenderTimer){var r=this.connection.isUsingTLS(),s=this.timelineSender;this.timelineSenderTimer=new Vs(6e4,function(){s.send(r)})}}disconnect(){this.connection.disconnect(),this.timelineSenderTimer&&(this.timelineSenderTimer.ensureAborted(),this.timelineSenderTimer=null)}bind(r,s,l){return this.global_emitter.bind(r,s,l),this}unbind(r,s,l){return this.global_emitter.unbind(r,s,l),this}bind_global(r){return this.global_emitter.bind_global(r),this}unbind_global(r){return this.global_emitter.unbind_global(r),this}unbind_all(r){return this.global_emitter.unbind_all(),this}subscribeAll(){var r;for(r in this.channels.channels)this.channels.channels.hasOwnProperty(r)&&this.subscribe(r)}subscribe(r){var s=this.channels.add(r,this);return s.subscriptionPending&&s.subscriptionCancelled?s.reinstateSubscription():!s.subscriptionPending&&this.connection.state==="connected"&&s.subscribe(),s}unsubscribe(r){var s=this.channels.find(r);s&&s.subscriptionPending?s.cancelSubscription():(s=this.channels.remove(r),s&&s.subscribed&&s.unsubscribe())}send_event(r,s,l){return this.connection.send_event(r,s,l)}shouldUseTLS(){return this.config.useTLS}signin(){this.user.signin()}}K.instances=[],K.isReady=!1,K.logToConsole=!1,K.Runtime=P,K.ScriptReceivers=P.ScriptReceivers,K.DependenciesReceivers=P.DependenciesReceivers,K.auth_callbacks=P.auth_callbacks;var At=i.default=K;function $a(o){if(o==null)throw"You must pass your app key when you instantiate Pusher."}P.setup(K)})])})})(nn)),nn.exports}var Ec=Cc();const Tc=di(Ec);window.axios=gc;window.axios.defaults.headers.common["X-Requested-With"]="XMLHttpRequest";window.axios.defaults.headers.common["X-CSRF-TOKEN"]=document.querySelector('meta[name="csrf-token"]').getAttribute("content");window.Pusher=Tc;window.Echo=new Sc({broadcaster:"reverb",key:"degxbyovjswubvzw9hhj",wsHost:"0.0.0.0",wsPort:"8080",wssPort:"8080",forceTLS:!1,enabledTransports:["ws","wss"],auth:{headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"}}});var un=!1,ln=!1,ve=[],hn=-1;function kc(e){Ac(e)}function Ac(e){ve.includes(e)||ve.push(e),Pc()}function Rc(e){let t=ve.indexOf(e);t!==-1&&t>hn&&ve.splice(t,1)}function Pc(){!ln&&!un&&(un=!0,queueMicrotask(Oc))}function Oc(){un=!1,ln=!0;for(let e=0;e<ve.length;e++)ve[e](),hn=e;ve.length=0,hn=-1,ln=!1}var Re,Ee,Pe,ki,dn=!0;function Lc(e){dn=!1,e(),dn=!0}function Ic(e){Re=e.reactive,Pe=e.release,Ee=t=>e.effect(t,{scheduler:n=>{dn?kc(n):n()}}),ki=e.raw}function Yr(e){Ee=e}function Mc(e){let t=()=>{};return[i=>{let a=Ee(i);return e._x_effects||(e._x_effects=new Set,e._x_runEffects=()=>{e._x_effects.forEach(c=>c())}),e._x_effects.add(a),t=()=>{a!==void 0&&(e._x_effects.delete(a),Pe(a))},a},()=>{t()}]}function Ai(e,t){let n=!0,i,a=Ee(()=>{let c=e();JSON.stringify(c),n?i=c:queueMicrotask(()=>{t(c,i),i=c}),n=!1});return()=>Pe(a)}var Ri=[],Pi=[],Oi=[];function Nc(e){Oi.push(e)}function An(e,t){typeof t=="function"?(e._x_cleanups||(e._x_cleanups=[]),e._x_cleanups.push(t)):(t=e,Pi.push(t))}function Li(e){Ri.push(e)}function Ii(e,t,n){e._x_attributeCleanups||(e._x_attributeCleanups={}),e._x_attributeCleanups[t]||(e._x_attributeCleanups[t]=[]),e._x_attributeCleanups[t].push(n)}function Mi(e,t){e._x_attributeCleanups&&Object.entries(e._x_attributeCleanups).forEach(([n,i])=>{(t===void 0||t.includes(n))&&(i.forEach(a=>a()),delete e._x_attributeCleanups[n])})}function jc(e){for(e._x_effects?.forEach(Rc);e._x_cleanups?.length;)e._x_cleanups.pop()()}var Rn=new MutationObserver(In),Pn=!1;function On(){Rn.observe(document,{subtree:!0,childList:!0,attributes:!0,attributeOldValue:!0}),Pn=!0}function Ni(){qc(),Rn.disconnect(),Pn=!1}var qe=[];function qc(){let e=Rn.takeRecords();qe.push(()=>e.length>0&&In(e));let t=qe.length;queueMicrotask(()=>{if(qe.length===t)for(;qe.length>0;)qe.shift()()})}function F(e){if(!Pn)return e();Ni();let t=e();return On(),t}var Ln=!1,ct=[];function Dc(){Ln=!0}function Bc(){Ln=!1,In(ct),ct=[]}function In(e){if(Ln){ct=ct.concat(e);return}let t=[],n=new Set,i=new Map,a=new Map;for(let c=0;c<e.length;c++)if(!e[c].target._x_ignoreMutationObserver&&(e[c].type==="childList"&&(e[c].removedNodes.forEach(u=>{u.nodeType===1&&u._x_marker&&n.add(u)}),e[c].addedNodes.forEach(u=>{if(u.nodeType===1){if(n.has(u)){n.delete(u);return}u._x_marker||t.push(u)}})),e[c].type==="attributes")){let u=e[c].target,h=e[c].attributeName,d=e[c].oldValue,p=()=>{i.has(u)||i.set(u,[]),i.get(u).push({name:h,value:u.getAttribute(h)})},_=()=>{a.has(u)||a.set(u,[]),a.get(u).push(h)};u.hasAttribute(h)&&d===null?p():u.hasAttribute(h)?(_(),p()):_()}a.forEach((c,u)=>{Mi(u,c)}),i.forEach((c,u)=>{Ri.forEach(h=>h(u,c))});for(let c of n)t.some(u=>u.contains(c))||Pi.forEach(u=>u(c));for(let c of t)c.isConnected&&Oi.forEach(u=>u(c));t=null,n=null,i=null,a=null}function ji(e){return xe(we(e))}function Xe(e,t,n){return e._x_dataStack=[t,...we(n||e)],()=>{e._x_dataStack=e._x_dataStack.filter(i=>i!==t)}}function we(e){return e._x_dataStack?e._x_dataStack:typeof ShadowRoot=="function"&&e instanceof ShadowRoot?we(e.host):e.parentNode?we(e.parentNode):[]}function xe(e){return new Proxy({objects:e},Fc)}var Fc={ownKeys({objects:e}){return Array.from(new Set(e.flatMap(t=>Object.keys(t))))},has({objects:e},t){return t==Symbol.unscopables?!1:e.some(n=>Object.prototype.hasOwnProperty.call(n,t)||Reflect.has(n,t))},get({objects:e},t,n){return t=="toJSON"?$c:Reflect.get(e.find(i=>Reflect.has(i,t))||{},t,n)},set({objects:e},t,n,i){const a=e.find(u=>Object.prototype.hasOwnProperty.call(u,t))||e[e.length-1],c=Object.getOwnPropertyDescriptor(a,t);return c?.set&&c?.get?c.set.call(i,n)||!0:Reflect.set(a,t,n)}};function $c(){return Reflect.ownKeys(this).reduce((t,n)=>(t[n]=Reflect.get(this,n),t),{})}function Mn(e){let t=i=>typeof i=="object"&&!Array.isArray(i)&&i!==null,n=(i,a="")=>{Object.entries(Object.getOwnPropertyDescriptors(i)).forEach(([c,{value:u,enumerable:h}])=>{if(h===!1||u===void 0||typeof u=="object"&&u!==null&&u.__v_skip)return;let d=a===""?c:`${a}.${c}`;typeof u=="object"&&u!==null&&u._x_interceptor?i[c]=u.initialize(e,d,c):t(u)&&u!==i&&!(u instanceof Element)&&n(u,d)})};return n(e)}function qi(e,t=()=>{}){let n={initialValue:void 0,_x_interceptor:!0,initialize(i,a,c){return e(this.initialValue,()=>Uc(i,a),u=>fn(i,a,u),a,c)}};return t(n),i=>{if(typeof i=="object"&&i!==null&&i._x_interceptor){let a=n.initialize.bind(n);n.initialize=(c,u,h)=>{let d=i.initialize(c,u,h);return n.initialValue=d,a(c,u,h)}}else n.initialValue=i;return n}}function Uc(e,t){return t.split(".").reduce((n,i)=>n[i],e)}function fn(e,t,n){if(typeof t=="string"&&(t=t.split(".")),t.length===1)e[t[0]]=n;else{if(t.length===0)throw error;return e[t[0]]||(e[t[0]]={}),fn(e[t[0]],t.slice(1),n)}}var Di={};function te(e,t){Di[e]=t}function He(e,t){let n=Hc(t);return Object.entries(Di).forEach(([i,a])=>{Object.defineProperty(e,`$${i}`,{get(){return a(t,n)},enumerable:!1})}),e}function Hc(e){let[t,n]=Xi(e),i={interceptor:qi,...t};return An(e,n),i}function zc(e,t,n,...i){try{return n(...i)}catch(a){ze(a,e,t)}}function ze(...e){return Bi(...e)}var Bi=Xc;function Wc(e){Bi=e}function Xc(e,t,n=void 0){e=Object.assign(e??{message:"No error message given."},{el:t,expression:n}),console.warn(`Alpine Expression Error: ${e.message}

${n?'Expression: "'+n+`"

`:""}`,t),setTimeout(()=>{throw e},0)}var ke=!0;function Fi(e){let t=ke;ke=!1;let n=e();return ke=t,n}function _e(e,t,n={}){let i;return J(e,t)(a=>i=a,n),i}function J(...e){return $i(...e)}var $i=Hi;function Kc(e){$i=e}var Ui;function Vc(e){Ui=e}function Hi(e,t){let n={};He(n,e);let i=[n,...we(e)],a=typeof t=="function"?Jc(i,t):Qc(i,t,e);return zc.bind(null,e,t,a)}function Jc(e,t){return(n=()=>{},{scope:i={},params:a=[],context:c}={})=>{if(!ke){We(n,t,xe([i,...e]),a);return}let u=t.apply(xe([i,...e]),a);We(n,u)}}var rn={};function Gc(e,t){if(rn[e])return rn[e];let n=Object.getPrototypeOf(async function(){}).constructor,i=/^[\n\s]*if.*\(.*\)/.test(e.trim())||/^(let|const)\s/.test(e.trim())?`(async()=>{ ${e} })()`:e,c=(()=>{try{let u=new n(["__self","scope"],`with (scope) { __self.result = ${i} }; __self.finished = true; return __self.result;`);return Object.defineProperty(u,"name",{value:`[Alpine] ${e}`}),u}catch(u){return ze(u,t,e),Promise.resolve()}})();return rn[e]=c,c}function Qc(e,t,n){let i=Gc(t,n);return(a=()=>{},{scope:c={},params:u=[],context:h}={})=>{i.result=void 0,i.finished=!1;let d=xe([c,...e]);if(typeof i=="function"){let p=i.call(h,i,d).catch(_=>ze(_,n,t));i.finished?(We(a,i.result,d,u,n),i.result=void 0):p.then(_=>{We(a,_,d,u,n)}).catch(_=>ze(_,n,t)).finally(()=>i.result=void 0)}}}function We(e,t,n,i,a){if(ke&&typeof t=="function"){let c=t.apply(n,i);c instanceof Promise?c.then(u=>We(e,u,n,i)).catch(u=>ze(u,a,t)):e(c)}else typeof t=="object"&&t instanceof Promise?t.then(c=>e(c)):e(t)}function Yc(...e){return Ui(...e)}function Zc(e,t,n={}){let i={};He(i,e);let a=[i,...we(e)],c=xe([n.scope??{},...a]),u=n.params??[];if(t.includes("await")){let h=Object.getPrototypeOf(async function(){}).constructor,d=/^[\n\s]*if.*\(.*\)/.test(t.trim())||/^(let|const)\s/.test(t.trim())?`(async()=>{ ${t} })()`:t;return new h(["scope"],`with (scope) { let __result = ${d}; return __result }`).call(n.context,c)}else{let h=/^[\n\s]*if.*\(.*\)/.test(t.trim())||/^(let|const)\s/.test(t.trim())?`(()=>{ ${t} })()`:t,p=new Function(["scope"],`with (scope) { let __result = ${h}; return __result }`).call(n.context,c);return typeof p=="function"&&ke?p.apply(c,u):p}}var Nn="x-";function Oe(e=""){return Nn+e}function eu(e){Nn=e}var ut={};function H(e,t){return ut[e]=t,{before(n){if(!ut[n]){console.warn(String.raw`Cannot find directive \`${n}\`. \`${e}\` will use the default order of execution`);return}const i=me.indexOf(n);me.splice(i>=0?i:me.indexOf("DEFAULT"),0,e)}}}function tu(e){return Object.keys(ut).includes(e)}function jn(e,t,n){if(t=Array.from(t),e._x_virtualDirectives){let c=Object.entries(e._x_virtualDirectives).map(([h,d])=>({name:h,value:d})),u=zi(c);c=c.map(h=>u.find(d=>d.name===h.name)?{name:`x-bind:${h.name}`,value:`"${h.value}"`}:h),t=t.concat(c)}let i={};return t.map(Ji((c,u)=>i[c]=u)).filter(Qi).map(iu(i,n)).sort(su).map(c=>ru(e,c))}function zi(e){return Array.from(e).map(Ji()).filter(t=>!Qi(t))}var pn=!1,Fe=new Map,Wi=Symbol();function nu(e){pn=!0;let t=Symbol();Wi=t,Fe.set(t,[]);let n=()=>{for(;Fe.get(t).length;)Fe.get(t).shift()();Fe.delete(t)},i=()=>{pn=!1,n()};e(n),i()}function Xi(e){let t=[],n=h=>t.push(h),[i,a]=Mc(e);return t.push(a),[{Alpine:Ie,effect:i,cleanup:n,evaluateLater:J.bind(J,e),evaluate:_e.bind(_e,e)},()=>t.forEach(h=>h())]}function ru(e,t){let n=()=>{},i=ut[t.type]||n,[a,c]=Xi(e);Ii(e,t.original,c);let u=()=>{e._x_ignore||e._x_ignoreSelf||(i.inline&&i.inline(e,t,a),i=i.bind(i,e,t,a),pn?Fe.get(Wi).push(i):i())};return u.runCleanups=c,u}var Ki=(e,t)=>({name:n,value:i})=>(n.startsWith(e)&&(n=n.replace(e,t)),{name:n,value:i}),Vi=e=>e;function Ji(e=()=>{}){return({name:t,value:n})=>{let{name:i,value:a}=Gi.reduce((c,u)=>u(c),{name:t,value:n});return i!==t&&e(i,t),{name:i,value:a}}}var Gi=[];function qn(e){Gi.push(e)}function Qi({name:e}){return Yi().test(e)}var Yi=()=>new RegExp(`^${Nn}([^:^.]+)\\b`);function iu(e,t){return({name:n,value:i})=>{let a=n.match(Yi()),c=n.match(/:([a-zA-Z0-9\-_:]+)/),u=n.match(/\.[^.\]]+(?=[^\]]*$)/g)||[],h=t||e[n]||n;return{type:a?a[1]:null,value:c?c[1]:null,modifiers:u.map(d=>d.replace(".","")),expression:i,original:h}}}var gn="DEFAULT",me=["ignore","ref","data","id","anchor","bind","init","for","model","modelable","transition","show","if",gn,"teleport"];function su(e,t){let n=me.indexOf(e.type)===-1?gn:e.type,i=me.indexOf(t.type)===-1?gn:t.type;return me.indexOf(n)-me.indexOf(i)}function $e(e,t,n={}){e.dispatchEvent(new CustomEvent(t,{detail:n,bubbles:!0,composed:!0,cancelable:!0}))}function Se(e,t){if(typeof ShadowRoot=="function"&&e instanceof ShadowRoot){Array.from(e.children).forEach(a=>Se(a,t));return}let n=!1;if(t(e,()=>n=!0),n)return;let i=e.firstElementChild;for(;i;)Se(i,t),i=i.nextElementSibling}function Z(e,...t){console.warn(`Alpine Warning: ${e}`,...t)}var Zr=!1;function ou(){Zr&&Z("Alpine has already been initialized on this page. Calling Alpine.start() more than once can cause problems."),Zr=!0,document.body||Z("Unable to initialize. Trying to load Alpine before `<body>` is available. Did you forget to add `defer` in Alpine's `<script>` tag?"),$e(document,"alpine:init"),$e(document,"alpine:initializing"),On(),Nc(t=>oe(t,Se)),An(t=>Le(t)),Li((t,n)=>{jn(t,n).forEach(i=>i())});let e=t=>!ht(t.parentElement,!0);Array.from(document.querySelectorAll(ts().join(","))).filter(e).forEach(t=>{oe(t)}),$e(document,"alpine:initialized"),setTimeout(()=>{lu()})}var Dn=[],Zi=[];function es(){return Dn.map(e=>e())}function ts(){return Dn.concat(Zi).map(e=>e())}function ns(e){Dn.push(e)}function rs(e){Zi.push(e)}function ht(e,t=!1){return Ce(e,n=>{if((t?ts():es()).some(a=>n.matches(a)))return!0})}function Ce(e,t){if(e){if(t(e))return e;if(e._x_teleportBack&&(e=e._x_teleportBack),e.parentNode instanceof ShadowRoot)return Ce(e.parentNode.host,t);if(e.parentElement)return Ce(e.parentElement,t)}}function au(e){return es().some(t=>e.matches(t))}var is=[];function cu(e){is.push(e)}var uu=1;function oe(e,t=Se,n=()=>{}){Ce(e,i=>i._x_ignore)||nu(()=>{t(e,(i,a)=>{i._x_marker||(n(i,a),is.forEach(c=>c(i,a)),jn(i,i.attributes).forEach(c=>c()),i._x_ignore||(i._x_marker=uu++),i._x_ignore&&a())})})}function Le(e,t=Se){t(e,n=>{jc(n),Mi(n),delete n._x_marker})}function lu(){[["ui","dialog",["[x-dialog], [x-popover]"]],["anchor","anchor",["[x-anchor]"]],["sort","sort",["[x-sort]"]]].forEach(([t,n,i])=>{tu(n)||i.some(a=>{if(document.querySelector(a))return Z(`found "${a}", but missing ${t} plugin`),!0})})}var mn=[],Bn=!1;function Fn(e=()=>{}){return queueMicrotask(()=>{Bn||setTimeout(()=>{vn()})}),new Promise(t=>{mn.push(()=>{e(),t()})})}function vn(){for(Bn=!1;mn.length;)mn.shift()()}function hu(){Bn=!0}function $n(e,t){return Array.isArray(t)?ei(e,t.join(" ")):typeof t=="object"&&t!==null?du(e,t):typeof t=="function"?$n(e,t()):ei(e,t)}function ei(e,t){let n=a=>a.split(" ").filter(c=>!e.classList.contains(c)).filter(Boolean),i=a=>(e.classList.add(...a),()=>{e.classList.remove(...a)});return t=t===!0?t="":t||"",i(n(t))}function du(e,t){let n=h=>h.split(" ").filter(Boolean),i=Object.entries(t).flatMap(([h,d])=>d?n(h):!1).filter(Boolean),a=Object.entries(t).flatMap(([h,d])=>d?!1:n(h)).filter(Boolean),c=[],u=[];return a.forEach(h=>{e.classList.contains(h)&&(e.classList.remove(h),u.push(h))}),i.forEach(h=>{e.classList.contains(h)||(e.classList.add(h),c.push(h))}),()=>{u.forEach(h=>e.classList.add(h)),c.forEach(h=>e.classList.remove(h))}}function dt(e,t){return typeof t=="object"&&t!==null?fu(e,t):pu(e,t)}function fu(e,t){let n={};return Object.entries(t).forEach(([i,a])=>{n[i]=e.style[i],i.startsWith("--")||(i=gu(i)),e.style.setProperty(i,a)}),setTimeout(()=>{e.style.length===0&&e.removeAttribute("style")}),()=>{dt(e,n)}}function pu(e,t){let n=e.getAttribute("style",t);return e.setAttribute("style",t),()=>{e.setAttribute("style",n||"")}}function gu(e){return e.replace(/([a-z])([A-Z])/g,"$1-$2").toLowerCase()}function _n(e,t=()=>{}){let n=!1;return function(){n?t.apply(this,arguments):(n=!0,e.apply(this,arguments))}}H("transition",(e,{value:t,modifiers:n,expression:i},{evaluate:a})=>{typeof i=="function"&&(i=a(i)),i!==!1&&(!i||typeof i=="boolean"?vu(e,n,t):mu(e,i,t))});function mu(e,t,n){ss(e,$n,""),{enter:a=>{e._x_transition.enter.during=a},"enter-start":a=>{e._x_transition.enter.start=a},"enter-end":a=>{e._x_transition.enter.end=a},leave:a=>{e._x_transition.leave.during=a},"leave-start":a=>{e._x_transition.leave.start=a},"leave-end":a=>{e._x_transition.leave.end=a}}[n](t)}function vu(e,t,n){ss(e,dt);let i=!t.includes("in")&&!t.includes("out")&&!n,a=i||t.includes("in")||["enter"].includes(n),c=i||t.includes("out")||["leave"].includes(n);t.includes("in")&&!i&&(t=t.filter((b,E)=>E<t.indexOf("out"))),t.includes("out")&&!i&&(t=t.filter((b,E)=>E>t.indexOf("out")));let u=!t.includes("opacity")&&!t.includes("scale"),h=u||t.includes("opacity"),d=u||t.includes("scale"),p=h?0:1,_=d?De(t,"scale",95)/100:1,v=De(t,"delay",0)/1e3,S=De(t,"origin","center"),C="opacity, transform",x=De(t,"duration",150)/1e3,k=De(t,"duration",75)/1e3,g="cubic-bezier(0.4, 0.0, 0.2, 1)";a&&(e._x_transition.enter.during={transformOrigin:S,transitionDelay:`${v}s`,transitionProperty:C,transitionDuration:`${x}s`,transitionTimingFunction:g},e._x_transition.enter.start={opacity:p,transform:`scale(${_})`},e._x_transition.enter.end={opacity:1,transform:"scale(1)"}),c&&(e._x_transition.leave.during={transformOrigin:S,transitionDelay:`${v}s`,transitionProperty:C,transitionDuration:`${k}s`,transitionTimingFunction:g},e._x_transition.leave.start={opacity:1,transform:"scale(1)"},e._x_transition.leave.end={opacity:p,transform:`scale(${_})`})}function ss(e,t,n={}){e._x_transition||(e._x_transition={enter:{during:n,start:n,end:n},leave:{during:n,start:n,end:n},in(i=()=>{},a=()=>{}){bn(e,t,{during:this.enter.during,start:this.enter.start,end:this.enter.end},i,a)},out(i=()=>{},a=()=>{}){bn(e,t,{during:this.leave.during,start:this.leave.start,end:this.leave.end},i,a)}})}window.Element.prototype._x_toggleAndCascadeWithTransitions=function(e,t,n,i){const a=document.visibilityState==="visible"?requestAnimationFrame:setTimeout;let c=()=>a(n);if(t){e._x_transition&&(e._x_transition.enter||e._x_transition.leave)?e._x_transition.enter&&(Object.entries(e._x_transition.enter.during).length||Object.entries(e._x_transition.enter.start).length||Object.entries(e._x_transition.enter.end).length)?e._x_transition.in(n):c():e._x_transition?e._x_transition.in(n):c();return}e._x_hidePromise=e._x_transition?new Promise((u,h)=>{e._x_transition.out(()=>{},()=>u(i)),e._x_transitioning&&e._x_transitioning.beforeCancel(()=>h({isFromCancelledTransition:!0}))}):Promise.resolve(i),queueMicrotask(()=>{let u=os(e);u?(u._x_hideChildren||(u._x_hideChildren=[]),u._x_hideChildren.push(e)):a(()=>{let h=d=>{let p=Promise.all([d._x_hidePromise,...(d._x_hideChildren||[]).map(h)]).then(([_])=>_?.());return delete d._x_hidePromise,delete d._x_hideChildren,p};h(e).catch(d=>{if(!d.isFromCancelledTransition)throw d})})})};function os(e){let t=e.parentNode;if(t)return t._x_hidePromise?t:os(t)}function bn(e,t,{during:n,start:i,end:a}={},c=()=>{},u=()=>{}){if(e._x_transitioning&&e._x_transitioning.cancel(),Object.keys(n).length===0&&Object.keys(i).length===0&&Object.keys(a).length===0){c(),u();return}let h,d,p;_u(e,{start(){h=t(e,i)},during(){d=t(e,n)},before:c,end(){h(),p=t(e,a)},after:u,cleanup(){d(),p()}})}function _u(e,t){let n,i,a,c=_n(()=>{F(()=>{n=!0,i||t.before(),a||(t.end(),vn()),t.after(),e.isConnected&&t.cleanup(),delete e._x_transitioning})});e._x_transitioning={beforeCancels:[],beforeCancel(u){this.beforeCancels.push(u)},cancel:_n(function(){for(;this.beforeCancels.length;)this.beforeCancels.shift()();c()}),finish:c},F(()=>{t.start(),t.during()}),hu(),requestAnimationFrame(()=>{if(n)return;let u=Number(getComputedStyle(e).transitionDuration.replace(/,.*/,"").replace("s",""))*1e3,h=Number(getComputedStyle(e).transitionDelay.replace(/,.*/,"").replace("s",""))*1e3;u===0&&(u=Number(getComputedStyle(e).animationDuration.replace("s",""))*1e3),F(()=>{t.before()}),i=!0,requestAnimationFrame(()=>{n||(F(()=>{t.end()}),vn(),setTimeout(e._x_transitioning.finish,u+h),a=!0)})})}function De(e,t,n){if(e.indexOf(t)===-1)return n;const i=e[e.indexOf(t)+1];if(!i||t==="scale"&&isNaN(i))return n;if(t==="duration"||t==="delay"){let a=i.match(/([0-9]+)ms/);if(a)return a[1]}return t==="origin"&&["top","right","left","center","bottom"].includes(e[e.indexOf(t)+2])?[i,e[e.indexOf(t)+2]].join(" "):i}var ce=!1;function le(e,t=()=>{}){return(...n)=>ce?t(...n):e(...n)}function bu(e){return(...t)=>ce&&e(...t)}var as=[];function ft(e){as.push(e)}function yu(e,t){as.forEach(n=>n(e,t)),ce=!0,cs(()=>{oe(t,(n,i)=>{i(n,()=>{})})}),ce=!1}var yn=!1;function wu(e,t){t._x_dataStack||(t._x_dataStack=e._x_dataStack),ce=!0,yn=!0,cs(()=>{xu(t)}),ce=!1,yn=!1}function xu(e){let t=!1;oe(e,(i,a)=>{Se(i,(c,u)=>{if(t&&au(c))return u();t=!0,a(c,u)})})}function cs(e){let t=Ee;Yr((n,i)=>{let a=t(n);return Pe(a),()=>{}}),e(),Yr(t)}function us(e,t,n,i=[]){switch(e._x_bindings||(e._x_bindings=Re({})),e._x_bindings[t]=n,t=i.includes("camel")?Pu(t):t,t){case"value":Su(e,n);break;case"style":Eu(e,n);break;case"class":Cu(e,n);break;case"selected":case"checked":Tu(e,t,n);break;default:ls(e,t,n);break}}function Su(e,t){if(fs(e))e.attributes.value===void 0&&(e.value=t),window.fromModel&&(typeof t=="boolean"?e.checked=ot(e.value)===t:e.checked=ti(e.value,t));else if(Un(e))Number.isInteger(t)?e.value=t:!Array.isArray(t)&&typeof t!="boolean"&&![null,void 0].includes(t)?e.value=String(t):Array.isArray(t)?e.checked=t.some(n=>ti(n,e.value)):e.checked=!!t;else if(e.tagName==="SELECT")Ru(e,t);else{if(e.value===t)return;e.value=t===void 0?"":t}}function Cu(e,t){e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedClasses=$n(e,t)}function Eu(e,t){e._x_undoAddedStyles&&e._x_undoAddedStyles(),e._x_undoAddedStyles=dt(e,t)}function Tu(e,t,n){ls(e,t,n),Au(e,t,n)}function ls(e,t,n){[null,void 0,!1].includes(n)&&Lu(t)?e.removeAttribute(t):(hs(t)&&(n=t),ku(e,t,n))}function ku(e,t,n){e.getAttribute(t)!=n&&e.setAttribute(t,n)}function Au(e,t,n){e[t]!==n&&(e[t]=n)}function Ru(e,t){const n=[].concat(t).map(i=>i+"");Array.from(e.options).forEach(i=>{i.selected=n.includes(i.value)})}function Pu(e){return e.toLowerCase().replace(/-(\w)/g,(t,n)=>n.toUpperCase())}function ti(e,t){return e==t}function ot(e){return[1,"1","true","on","yes",!0].includes(e)?!0:[0,"0","false","off","no",!1].includes(e)?!1:e?!!e:null}var Ou=new Set(["allowfullscreen","async","autofocus","autoplay","checked","controls","default","defer","disabled","formnovalidate","inert","ismap","itemscope","loop","multiple","muted","nomodule","novalidate","open","playsinline","readonly","required","reversed","selected","shadowrootclonable","shadowrootdelegatesfocus","shadowrootserializable"]);function hs(e){return Ou.has(e)}function Lu(e){return!["aria-pressed","aria-checked","aria-expanded","aria-selected"].includes(e)}function Iu(e,t,n){return e._x_bindings&&e._x_bindings[t]!==void 0?e._x_bindings[t]:ds(e,t,n)}function Mu(e,t,n,i=!0){if(e._x_bindings&&e._x_bindings[t]!==void 0)return e._x_bindings[t];if(e._x_inlineBindings&&e._x_inlineBindings[t]!==void 0){let a=e._x_inlineBindings[t];return a.extract=i,Fi(()=>_e(e,a.expression))}return ds(e,t,n)}function ds(e,t,n){let i=e.getAttribute(t);return i===null?typeof n=="function"?n():n:i===""?!0:hs(t)?!![t,"true"].includes(i):i}function Un(e){return e.type==="checkbox"||e.localName==="ui-checkbox"||e.localName==="ui-switch"}function fs(e){return e.type==="radio"||e.localName==="ui-radio"}function ps(e,t){let n;return function(){const i=this,a=arguments,c=function(){n=null,e.apply(i,a)};clearTimeout(n),n=setTimeout(c,t)}}function gs(e,t){let n;return function(){let i=this,a=arguments;n||(e.apply(i,a),n=!0,setTimeout(()=>n=!1,t))}}function ms({get:e,set:t},{get:n,set:i}){let a=!0,c,u=Ee(()=>{let h=e(),d=n();if(a)i(sn(h)),a=!1;else{let p=JSON.stringify(h),_=JSON.stringify(d);p!==c?i(sn(h)):p!==_&&t(sn(d))}c=JSON.stringify(e()),JSON.stringify(n())});return()=>{Pe(u)}}function sn(e){return typeof e=="object"?JSON.parse(JSON.stringify(e)):e}function Nu(e){(Array.isArray(e)?e:[e]).forEach(n=>n(Ie))}var ge={},ni=!1;function ju(e,t){if(ni||(ge=Re(ge),ni=!0),t===void 0)return ge[e];ge[e]=t,Mn(ge[e]),typeof t=="object"&&t!==null&&t.hasOwnProperty("init")&&typeof t.init=="function"&&ge[e].init()}function qu(){return ge}var vs={};function Du(e,t){let n=typeof t!="function"?()=>t:t;return e instanceof Element?_s(e,n()):(vs[e]=n,()=>{})}function Bu(e){return Object.entries(vs).forEach(([t,n])=>{Object.defineProperty(e,t,{get(){return(...i)=>n(...i)}})}),e}function _s(e,t,n){let i=[];for(;i.length;)i.pop()();let a=Object.entries(t).map(([u,h])=>({name:u,value:h})),c=zi(a);return a=a.map(u=>c.find(h=>h.name===u.name)?{name:`x-bind:${u.name}`,value:`"${u.value}"`}:u),jn(e,a,n).map(u=>{i.push(u.runCleanups),u()}),()=>{for(;i.length;)i.pop()()}}var bs={};function Fu(e,t){bs[e]=t}function $u(e,t){return Object.entries(bs).forEach(([n,i])=>{Object.defineProperty(e,n,{get(){return(...a)=>i.bind(t)(...a)},enumerable:!1})}),e}var Uu={get reactive(){return Re},get release(){return Pe},get effect(){return Ee},get raw(){return ki},version:"3.15.3",flushAndStopDeferringMutations:Bc,dontAutoEvaluateFunctions:Fi,disableEffectScheduling:Lc,startObservingMutations:On,stopObservingMutations:Ni,setReactivityEngine:Ic,onAttributeRemoved:Ii,onAttributesAdded:Li,closestDataStack:we,skipDuringClone:le,onlyDuringClone:bu,addRootSelector:ns,addInitSelector:rs,setErrorHandler:Wc,interceptClone:ft,addScopeToNode:Xe,deferMutations:Dc,mapAttributes:qn,evaluateLater:J,interceptInit:cu,initInterceptors:Mn,injectMagics:He,setEvaluator:Kc,setRawEvaluator:Vc,mergeProxies:xe,extractProp:Mu,findClosest:Ce,onElRemoved:An,closestRoot:ht,destroyTree:Le,interceptor:qi,transition:bn,setStyles:dt,mutateDom:F,directive:H,entangle:ms,throttle:gs,debounce:ps,evaluate:_e,evaluateRaw:Yc,initTree:oe,nextTick:Fn,prefixed:Oe,prefix:eu,plugin:Nu,magic:te,store:ju,start:ou,clone:wu,cloneNode:yu,bound:Iu,$data:ji,watch:Ai,walk:Se,data:Fu,bind:Du},Ie=Uu;function Hu(e,t){const n=Object.create(null),i=e.split(",");for(let a=0;a<i.length;a++)n[i[a]]=!0;return a=>!!n[a]}var zu=Object.freeze({}),Wu=Object.prototype.hasOwnProperty,pt=(e,t)=>Wu.call(e,t),be=Array.isArray,Ue=e=>ys(e)==="[object Map]",Xu=e=>typeof e=="string",Hn=e=>typeof e=="symbol",gt=e=>e!==null&&typeof e=="object",Ku=Object.prototype.toString,ys=e=>Ku.call(e),ws=e=>ys(e).slice(8,-1),zn=e=>Xu(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Vu=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},Ju=Vu(e=>e.charAt(0).toUpperCase()+e.slice(1)),xs=(e,t)=>e!==t&&(e===e||t===t),wn=new WeakMap,Be=[],ne,ye=Symbol("iterate"),xn=Symbol("Map key iterate");function Gu(e){return e&&e._isEffect===!0}function Qu(e,t=zu){Gu(e)&&(e=e.raw);const n=el(e,t);return t.lazy||n(),n}function Yu(e){e.active&&(Ss(e),e.options.onStop&&e.options.onStop(),e.active=!1)}var Zu=0;function el(e,t){const n=function(){if(!n.active)return e();if(!Be.includes(n)){Ss(n);try{return nl(),Be.push(n),ne=n,e()}finally{Be.pop(),Cs(),ne=Be[Be.length-1]}}};return n.id=Zu++,n.allowRecurse=!!t.allowRecurse,n._isEffect=!0,n.active=!0,n.raw=e,n.deps=[],n.options=t,n}function Ss(e){const{deps:t}=e;if(t.length){for(let n=0;n<t.length;n++)t[n].delete(e);t.length=0}}var Ae=!0,Wn=[];function tl(){Wn.push(Ae),Ae=!1}function nl(){Wn.push(Ae),Ae=!0}function Cs(){const e=Wn.pop();Ae=e===void 0?!0:e}function ee(e,t,n){if(!Ae||ne===void 0)return;let i=wn.get(e);i||wn.set(e,i=new Map);let a=i.get(n);a||i.set(n,a=new Set),a.has(ne)||(a.add(ne),ne.deps.push(a),ne.options.onTrack&&ne.options.onTrack({effect:ne,target:e,type:t,key:n}))}function ue(e,t,n,i,a,c){const u=wn.get(e);if(!u)return;const h=new Set,d=_=>{_&&_.forEach(v=>{(v!==ne||v.allowRecurse)&&h.add(v)})};if(t==="clear")u.forEach(d);else if(n==="length"&&be(e))u.forEach((_,v)=>{(v==="length"||v>=i)&&d(_)});else switch(n!==void 0&&d(u.get(n)),t){case"add":be(e)?zn(n)&&d(u.get("length")):(d(u.get(ye)),Ue(e)&&d(u.get(xn)));break;case"delete":be(e)||(d(u.get(ye)),Ue(e)&&d(u.get(xn)));break;case"set":Ue(e)&&d(u.get(ye));break}const p=_=>{_.options.onTrigger&&_.options.onTrigger({effect:_,target:e,key:n,type:t,newValue:i,oldValue:a,oldTarget:c}),_.options.scheduler?_.options.scheduler(_):_()};h.forEach(p)}var rl=Hu("__proto__,__v_isRef,__isVue"),Es=new Set(Object.getOwnPropertyNames(Symbol).map(e=>Symbol[e]).filter(Hn)),il=Ts(),sl=Ts(!0),ri=ol();function ol(){const e={};return["includes","indexOf","lastIndexOf"].forEach(t=>{e[t]=function(...n){const i=D(this);for(let c=0,u=this.length;c<u;c++)ee(i,"get",c+"");const a=i[t](...n);return a===-1||a===!1?i[t](...n.map(D)):a}}),["push","pop","shift","unshift","splice"].forEach(t=>{e[t]=function(...n){tl();const i=D(this)[t].apply(this,n);return Cs(),i}}),e}function Ts(e=!1,t=!1){return function(i,a,c){if(a==="__v_isReactive")return!e;if(a==="__v_isReadonly")return e;if(a==="__v_raw"&&c===(e?t?yl:Ps:t?bl:Rs).get(i))return i;const u=be(i);if(!e&&u&&pt(ri,a))return Reflect.get(ri,a,c);const h=Reflect.get(i,a,c);return(Hn(a)?Es.has(a):rl(a))||(e||ee(i,"get",a),t)?h:Sn(h)?!u||!zn(a)?h.value:h:gt(h)?e?Os(h):Jn(h):h}}var al=cl();function cl(e=!1){return function(n,i,a,c){let u=n[i];if(!e&&(a=D(a),u=D(u),!be(n)&&Sn(u)&&!Sn(a)))return u.value=a,!0;const h=be(n)&&zn(i)?Number(i)<n.length:pt(n,i),d=Reflect.set(n,i,a,c);return n===D(c)&&(h?xs(a,u)&&ue(n,"set",i,a,u):ue(n,"add",i,a)),d}}function ul(e,t){const n=pt(e,t),i=e[t],a=Reflect.deleteProperty(e,t);return a&&n&&ue(e,"delete",t,void 0,i),a}function ll(e,t){const n=Reflect.has(e,t);return(!Hn(t)||!Es.has(t))&&ee(e,"has",t),n}function hl(e){return ee(e,"iterate",be(e)?"length":ye),Reflect.ownKeys(e)}var dl={get:il,set:al,deleteProperty:ul,has:ll,ownKeys:hl},fl={get:sl,set(e,t){return console.warn(`Set operation on key "${String(t)}" failed: target is readonly.`,e),!0},deleteProperty(e,t){return console.warn(`Delete operation on key "${String(t)}" failed: target is readonly.`,e),!0}},Xn=e=>gt(e)?Jn(e):e,Kn=e=>gt(e)?Os(e):e,Vn=e=>e,mt=e=>Reflect.getPrototypeOf(e);function tt(e,t,n=!1,i=!1){e=e.__v_raw;const a=D(e),c=D(t);t!==c&&!n&&ee(a,"get",t),!n&&ee(a,"get",c);const{has:u}=mt(a),h=i?Vn:n?Kn:Xn;if(u.call(a,t))return h(e.get(t));if(u.call(a,c))return h(e.get(c));e!==a&&e.get(t)}function nt(e,t=!1){const n=this.__v_raw,i=D(n),a=D(e);return e!==a&&!t&&ee(i,"has",e),!t&&ee(i,"has",a),e===a?n.has(e):n.has(e)||n.has(a)}function rt(e,t=!1){return e=e.__v_raw,!t&&ee(D(e),"iterate",ye),Reflect.get(e,"size",e)}function ii(e){e=D(e);const t=D(this);return mt(t).has.call(t,e)||(t.add(e),ue(t,"add",e,e)),this}function si(e,t){t=D(t);const n=D(this),{has:i,get:a}=mt(n);let c=i.call(n,e);c?As(n,i,e):(e=D(e),c=i.call(n,e));const u=a.call(n,e);return n.set(e,t),c?xs(t,u)&&ue(n,"set",e,t,u):ue(n,"add",e,t),this}function oi(e){const t=D(this),{has:n,get:i}=mt(t);let a=n.call(t,e);a?As(t,n,e):(e=D(e),a=n.call(t,e));const c=i?i.call(t,e):void 0,u=t.delete(e);return a&&ue(t,"delete",e,void 0,c),u}function ai(){const e=D(this),t=e.size!==0,n=Ue(e)?new Map(e):new Set(e),i=e.clear();return t&&ue(e,"clear",void 0,void 0,n),i}function it(e,t){return function(i,a){const c=this,u=c.__v_raw,h=D(u),d=t?Vn:e?Kn:Xn;return!e&&ee(h,"iterate",ye),u.forEach((p,_)=>i.call(a,d(p),d(_),c))}}function st(e,t,n){return function(...i){const a=this.__v_raw,c=D(a),u=Ue(c),h=e==="entries"||e===Symbol.iterator&&u,d=e==="keys"&&u,p=a[e](...i),_=n?Vn:t?Kn:Xn;return!t&&ee(c,"iterate",d?xn:ye),{next(){const{value:v,done:S}=p.next();return S?{value:v,done:S}:{value:h?[_(v[0]),_(v[1])]:_(v),done:S}},[Symbol.iterator](){return this}}}}function ae(e){return function(...t){{const n=t[0]?`on key "${t[0]}" `:"";console.warn(`${Ju(e)} operation ${n}failed: target is readonly.`,D(this))}return e==="delete"?!1:this}}function pl(){const e={get(c){return tt(this,c)},get size(){return rt(this)},has:nt,add:ii,set:si,delete:oi,clear:ai,forEach:it(!1,!1)},t={get(c){return tt(this,c,!1,!0)},get size(){return rt(this)},has:nt,add:ii,set:si,delete:oi,clear:ai,forEach:it(!1,!0)},n={get(c){return tt(this,c,!0)},get size(){return rt(this,!0)},has(c){return nt.call(this,c,!0)},add:ae("add"),set:ae("set"),delete:ae("delete"),clear:ae("clear"),forEach:it(!0,!1)},i={get(c){return tt(this,c,!0,!0)},get size(){return rt(this,!0)},has(c){return nt.call(this,c,!0)},add:ae("add"),set:ae("set"),delete:ae("delete"),clear:ae("clear"),forEach:it(!0,!0)};return["keys","values","entries",Symbol.iterator].forEach(c=>{e[c]=st(c,!1,!1),n[c]=st(c,!0,!1),t[c]=st(c,!1,!0),i[c]=st(c,!0,!0)}),[e,n,t,i]}var[gl,ml]=pl();function ks(e,t){const n=e?ml:gl;return(i,a,c)=>a==="__v_isReactive"?!e:a==="__v_isReadonly"?e:a==="__v_raw"?i:Reflect.get(pt(n,a)&&a in i?n:i,a,c)}var vl={get:ks(!1)},_l={get:ks(!0)};function As(e,t,n){const i=D(n);if(i!==n&&t.call(e,i)){const a=ws(e);console.warn(`Reactive ${a} contains both the raw and reactive versions of the same object${a==="Map"?" as keys":""}, which can lead to inconsistencies. Avoid differentiating between the raw and reactive versions of an object and only use the reactive version if possible.`)}}var Rs=new WeakMap,bl=new WeakMap,Ps=new WeakMap,yl=new WeakMap;function wl(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function xl(e){return e.__v_skip||!Object.isExtensible(e)?0:wl(ws(e))}function Jn(e){return e&&e.__v_isReadonly?e:Ls(e,!1,dl,vl,Rs)}function Os(e){return Ls(e,!0,fl,_l,Ps)}function Ls(e,t,n,i,a){if(!gt(e))return console.warn(`value cannot be made reactive: ${String(e)}`),e;if(e.__v_raw&&!(t&&e.__v_isReactive))return e;const c=a.get(e);if(c)return c;const u=xl(e);if(u===0)return e;const h=new Proxy(e,u===2?i:n);return a.set(e,h),h}function D(e){return e&&D(e.__v_raw)||e}function Sn(e){return!!(e&&e.__v_isRef===!0)}te("nextTick",()=>Fn);te("dispatch",e=>$e.bind($e,e));te("watch",(e,{evaluateLater:t,cleanup:n})=>(i,a)=>{let c=t(i),h=Ai(()=>{let d;return c(p=>d=p),d},a);n(h)});te("store",qu);te("data",e=>ji(e));te("root",e=>ht(e));te("refs",e=>(e._x_refs_proxy||(e._x_refs_proxy=xe(Sl(e))),e._x_refs_proxy));function Sl(e){let t=[];return Ce(e,n=>{n._x_refs&&t.push(n._x_refs)}),t}var on={};function Is(e){return on[e]||(on[e]=0),++on[e]}function Cl(e,t){return Ce(e,n=>{if(n._x_ids&&n._x_ids[t])return!0})}function El(e,t){e._x_ids||(e._x_ids={}),e._x_ids[t]||(e._x_ids[t]=Is(t))}te("id",(e,{cleanup:t})=>(n,i=null)=>{let a=`${n}${i?`-${i}`:""}`;return Tl(e,a,t,()=>{let c=Cl(e,n),u=c?c._x_ids[n]:Is(n);return i?`${n}-${u}-${i}`:`${n}-${u}`})});ft((e,t)=>{e._x_id&&(t._x_id=e._x_id)});function Tl(e,t,n,i){if(e._x_id||(e._x_id={}),e._x_id[t])return e._x_id[t];let a=i();return e._x_id[t]=a,n(()=>{delete e._x_id[t]}),a}te("el",e=>e);Ms("Focus","focus","focus");Ms("Persist","persist","persist");function Ms(e,t,n){te(t,i=>Z(`You can't use [$${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${n}`,i))}H("modelable",(e,{expression:t},{effect:n,evaluateLater:i,cleanup:a})=>{let c=i(t),u=()=>{let _;return c(v=>_=v),_},h=i(`${t} = __placeholder`),d=_=>h(()=>{},{scope:{__placeholder:_}}),p=u();d(p),queueMicrotask(()=>{if(!e._x_model)return;e._x_removeModelListeners.default();let _=e._x_model.get,v=e._x_model.set,S=ms({get(){return _()},set(C){v(C)}},{get(){return u()},set(C){d(C)}});a(S)})});H("teleport",(e,{modifiers:t,expression:n},{cleanup:i})=>{e.tagName.toLowerCase()!=="template"&&Z("x-teleport can only be used on a <template> tag",e);let a=ci(n),c=e.content.cloneNode(!0).firstElementChild;e._x_teleport=c,c._x_teleportBack=e,e.setAttribute("data-teleport-template",!0),c.setAttribute("data-teleport-target",!0),e._x_forwardEvents&&e._x_forwardEvents.forEach(h=>{c.addEventListener(h,d=>{d.stopPropagation(),e.dispatchEvent(new d.constructor(d.type,d))})}),Xe(c,{},e);let u=(h,d,p)=>{p.includes("prepend")?d.parentNode.insertBefore(h,d):p.includes("append")?d.parentNode.insertBefore(h,d.nextSibling):d.appendChild(h)};F(()=>{u(c,a,t),le(()=>{oe(c)})()}),e._x_teleportPutBack=()=>{let h=ci(n);F(()=>{u(e._x_teleport,h,t)})},i(()=>F(()=>{c.remove(),Le(c)}))});var kl=document.createElement("div");function ci(e){let t=le(()=>document.querySelector(e),()=>kl)();return t||Z(`Cannot find x-teleport element for selector: "${e}"`),t}var Ns=()=>{};Ns.inline=(e,{modifiers:t},{cleanup:n})=>{t.includes("self")?e._x_ignoreSelf=!0:e._x_ignore=!0,n(()=>{t.includes("self")?delete e._x_ignoreSelf:delete e._x_ignore})};H("ignore",Ns);H("effect",le((e,{expression:t},{effect:n})=>{n(J(e,t))}));function Cn(e,t,n,i){let a=e,c=d=>i(d),u={},h=(d,p)=>_=>p(d,_);if(n.includes("dot")&&(t=Al(t)),n.includes("camel")&&(t=Rl(t)),n.includes("passive")&&(u.passive=!0),n.includes("capture")&&(u.capture=!0),n.includes("window")&&(a=window),n.includes("document")&&(a=document),n.includes("debounce")){let d=n[n.indexOf("debounce")+1]||"invalid-wait",p=lt(d.split("ms")[0])?Number(d.split("ms")[0]):250;c=ps(c,p)}if(n.includes("throttle")){let d=n[n.indexOf("throttle")+1]||"invalid-wait",p=lt(d.split("ms")[0])?Number(d.split("ms")[0]):250;c=gs(c,p)}return n.includes("prevent")&&(c=h(c,(d,p)=>{p.preventDefault(),d(p)})),n.includes("stop")&&(c=h(c,(d,p)=>{p.stopPropagation(),d(p)})),n.includes("once")&&(c=h(c,(d,p)=>{d(p),a.removeEventListener(t,c,u)})),(n.includes("away")||n.includes("outside"))&&(a=document,c=h(c,(d,p)=>{e.contains(p.target)||p.target.isConnected!==!1&&(e.offsetWidth<1&&e.offsetHeight<1||e._x_isShown!==!1&&d(p))})),n.includes("self")&&(c=h(c,(d,p)=>{p.target===e&&d(p)})),(Ol(t)||js(t))&&(c=h(c,(d,p)=>{Ll(p,n)||d(p)})),a.addEventListener(t,c,u),()=>{a.removeEventListener(t,c,u)}}function Al(e){return e.replace(/-/g,".")}function Rl(e){return e.toLowerCase().replace(/-(\w)/g,(t,n)=>n.toUpperCase())}function lt(e){return!Array.isArray(e)&&!isNaN(e)}function Pl(e){return[" ","_"].includes(e)?e:e.replace(/([a-z])([A-Z])/g,"$1-$2").replace(/[_\s]/,"-").toLowerCase()}function Ol(e){return["keydown","keyup"].includes(e)}function js(e){return["contextmenu","click","mouse"].some(t=>e.includes(t))}function Ll(e,t){let n=t.filter(c=>!["window","document","prevent","stop","once","capture","self","away","outside","passive","preserve-scroll"].includes(c));if(n.includes("debounce")){let c=n.indexOf("debounce");n.splice(c,lt((n[c+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.includes("throttle")){let c=n.indexOf("throttle");n.splice(c,lt((n[c+1]||"invalid-wait").split("ms")[0])?2:1)}if(n.length===0||n.length===1&&ui(e.key).includes(n[0]))return!1;const a=["ctrl","shift","alt","meta","cmd","super"].filter(c=>n.includes(c));return n=n.filter(c=>!a.includes(c)),!(a.length>0&&a.filter(u=>((u==="cmd"||u==="super")&&(u="meta"),e[`${u}Key`])).length===a.length&&(js(e.type)||ui(e.key).includes(n[0])))}function ui(e){if(!e)return[];e=Pl(e);let t={ctrl:"control",slash:"/",space:" ",spacebar:" ",cmd:"meta",esc:"escape",up:"arrow-up",down:"arrow-down",left:"arrow-left",right:"arrow-right",period:".",comma:",",equal:"=",minus:"-",underscore:"_"};return t[e]=e,Object.keys(t).map(n=>{if(t[n]===e)return n}).filter(n=>n)}H("model",(e,{modifiers:t,expression:n},{effect:i,cleanup:a})=>{let c=e;t.includes("parent")&&(c=e.parentNode);let u=J(c,n),h;typeof n=="string"?h=J(c,`${n} = __placeholder`):typeof n=="function"&&typeof n()=="string"?h=J(c,`${n()} = __placeholder`):h=()=>{};let d=()=>{let S;return u(C=>S=C),li(S)?S.get():S},p=S=>{let C;u(x=>C=x),li(C)?C.set(S):h(()=>{},{scope:{__placeholder:S}})};typeof n=="string"&&e.type==="radio"&&F(()=>{e.hasAttribute("name")||e.setAttribute("name",n)});let _=e.tagName.toLowerCase()==="select"||["checkbox","radio"].includes(e.type)||t.includes("lazy")?"change":"input",v=ce?()=>{}:Cn(e,_,t,S=>{p(an(e,t,S,d()))});if(t.includes("fill")&&([void 0,null,""].includes(d())||Un(e)&&Array.isArray(d())||e.tagName.toLowerCase()==="select"&&e.multiple)&&p(an(e,t,{target:e},d())),e._x_removeModelListeners||(e._x_removeModelListeners={}),e._x_removeModelListeners.default=v,a(()=>e._x_removeModelListeners.default()),e.form){let S=Cn(e.form,"reset",[],C=>{Fn(()=>e._x_model&&e._x_model.set(an(e,t,{target:e},d())))});a(()=>S())}e._x_model={get(){return d()},set(S){p(S)}},e._x_forceModelUpdate=S=>{S===void 0&&typeof n=="string"&&n.match(/\./)&&(S=""),window.fromModel=!0,F(()=>us(e,"value",S)),delete window.fromModel},i(()=>{let S=d();t.includes("unintrusive")&&document.activeElement.isSameNode(e)||e._x_forceModelUpdate(S)})});function an(e,t,n,i){return F(()=>{if(n instanceof CustomEvent&&n.detail!==void 0)return n.detail!==null&&n.detail!==void 0?n.detail:n.target.value;if(Un(e))if(Array.isArray(i)){let a=null;return t.includes("number")?a=cn(n.target.value):t.includes("boolean")?a=ot(n.target.value):a=n.target.value,n.target.checked?i.includes(a)?i:i.concat([a]):i.filter(c=>!Il(c,a))}else return n.target.checked;else{if(e.tagName.toLowerCase()==="select"&&e.multiple)return t.includes("number")?Array.from(n.target.selectedOptions).map(a=>{let c=a.value||a.text;return cn(c)}):t.includes("boolean")?Array.from(n.target.selectedOptions).map(a=>{let c=a.value||a.text;return ot(c)}):Array.from(n.target.selectedOptions).map(a=>a.value||a.text);{let a;return fs(e)?n.target.checked?a=n.target.value:a=i:a=n.target.value,t.includes("number")?cn(a):t.includes("boolean")?ot(a):t.includes("trim")?a.trim():a}}})}function cn(e){let t=e?parseFloat(e):null;return Ml(t)?t:e}function Il(e,t){return e==t}function Ml(e){return!Array.isArray(e)&&!isNaN(e)}function li(e){return e!==null&&typeof e=="object"&&typeof e.get=="function"&&typeof e.set=="function"}H("cloak",e=>queueMicrotask(()=>F(()=>e.removeAttribute(Oe("cloak")))));rs(()=>`[${Oe("init")}]`);H("init",le((e,{expression:t},{evaluate:n})=>typeof t=="string"?!!t.trim()&&n(t,{},!1):n(t,{},!1)));H("text",(e,{expression:t},{effect:n,evaluateLater:i})=>{let a=i(t);n(()=>{a(c=>{F(()=>{e.textContent=c})})})});H("html",(e,{expression:t},{effect:n,evaluateLater:i})=>{let a=i(t);n(()=>{a(c=>{F(()=>{e.innerHTML=c,e._x_ignoreSelf=!0,oe(e),delete e._x_ignoreSelf})})})});qn(Ki(":",Vi(Oe("bind:"))));var qs=(e,{value:t,modifiers:n,expression:i,original:a},{effect:c,cleanup:u})=>{if(!t){let d={};Bu(d),J(e,i)(_=>{_s(e,_,a)},{scope:d});return}if(t==="key")return Nl(e,i);if(e._x_inlineBindings&&e._x_inlineBindings[t]&&e._x_inlineBindings[t].extract)return;let h=J(e,i);c(()=>h(d=>{d===void 0&&typeof i=="string"&&i.match(/\./)&&(d=""),F(()=>us(e,t,d,n))})),u(()=>{e._x_undoAddedClasses&&e._x_undoAddedClasses(),e._x_undoAddedStyles&&e._x_undoAddedStyles()})};qs.inline=(e,{value:t,modifiers:n,expression:i})=>{t&&(e._x_inlineBindings||(e._x_inlineBindings={}),e._x_inlineBindings[t]={expression:i,extract:!1})};H("bind",qs);function Nl(e,t){e._x_keyExpression=t}ns(()=>`[${Oe("data")}]`);H("data",(e,{expression:t},{cleanup:n})=>{if(jl(e))return;t=t===""?"{}":t;let i={};He(i,e);let a={};$u(a,i);let c=_e(e,t,{scope:a});(c===void 0||c===!0)&&(c={}),He(c,e);let u=Re(c);Mn(u);let h=Xe(e,u);u.init&&_e(e,u.init),n(()=>{u.destroy&&_e(e,u.destroy),h()})});ft((e,t)=>{e._x_dataStack&&(t._x_dataStack=e._x_dataStack,t.setAttribute("data-has-alpine-state",!0))});function jl(e){return ce?yn?!0:e.hasAttribute("data-has-alpine-state"):!1}H("show",(e,{modifiers:t,expression:n},{effect:i})=>{let a=J(e,n);e._x_doHide||(e._x_doHide=()=>{F(()=>{e.style.setProperty("display","none",t.includes("important")?"important":void 0)})}),e._x_doShow||(e._x_doShow=()=>{F(()=>{e.style.length===1&&e.style.display==="none"?e.removeAttribute("style"):e.style.removeProperty("display")})});let c=()=>{e._x_doHide(),e._x_isShown=!1},u=()=>{e._x_doShow(),e._x_isShown=!0},h=()=>setTimeout(u),d=_n(v=>v?u():c(),v=>{typeof e._x_toggleAndCascadeWithTransitions=="function"?e._x_toggleAndCascadeWithTransitions(e,v,u,c):v?h():c()}),p,_=!0;i(()=>a(v=>{!_&&v===p||(t.includes("immediate")&&(v?h():c()),d(v),p=v,_=!1)}))});H("for",(e,{expression:t},{effect:n,cleanup:i})=>{let a=Dl(t),c=J(e,a.items),u=J(e,e._x_keyExpression||"index");e._x_prevKeys=[],e._x_lookup={},n(()=>ql(e,a,c,u)),i(()=>{Object.values(e._x_lookup).forEach(h=>F(()=>{Le(h),h.remove()})),delete e._x_prevKeys,delete e._x_lookup})});function ql(e,t,n,i){let a=u=>typeof u=="object"&&!Array.isArray(u),c=e;n(u=>{Bl(u)&&u>=0&&(u=Array.from(Array(u).keys(),g=>g+1)),u===void 0&&(u=[]);let h=e._x_lookup,d=e._x_prevKeys,p=[],_=[];if(a(u))u=Object.entries(u).map(([g,b])=>{let E=hi(t,b,g,u);i(A=>{_.includes(A)&&Z("Duplicate key on x-for",e),_.push(A)},{scope:{index:g,...E}}),p.push(E)});else for(let g=0;g<u.length;g++){let b=hi(t,u[g],g,u);i(E=>{_.includes(E)&&Z("Duplicate key on x-for",e),_.push(E)},{scope:{index:g,...b}}),p.push(b)}let v=[],S=[],C=[],x=[];for(let g=0;g<d.length;g++){let b=d[g];_.indexOf(b)===-1&&C.push(b)}d=d.filter(g=>!C.includes(g));let k="template";for(let g=0;g<_.length;g++){let b=_[g],E=d.indexOf(b);if(E===-1)d.splice(g,0,b),v.push([k,g]);else if(E!==g){let A=d.splice(g,1)[0],O=d.splice(E-1,1)[0];d.splice(g,0,O),d.splice(E,0,A),S.push([A,O])}else x.push(b);k=b}for(let g=0;g<C.length;g++){let b=C[g];b in h&&(F(()=>{Le(h[b]),h[b].remove()}),delete h[b])}for(let g=0;g<S.length;g++){let[b,E]=S[g],A=h[b],O=h[E],L=document.createElement("div");F(()=>{O||Z('x-for ":key" is undefined or invalid',c,E,h),O.after(L),A.after(O),O._x_currentIfEl&&O.after(O._x_currentIfEl),L.before(A),A._x_currentIfEl&&A.after(A._x_currentIfEl),L.remove()}),O._x_refreshXForScope(p[_.indexOf(E)])}for(let g=0;g<v.length;g++){let[b,E]=v[g],A=b==="template"?c:h[b];A._x_currentIfEl&&(A=A._x_currentIfEl);let O=p[E],L=_[E],q=document.importNode(c.content,!0).firstElementChild,y=Re(O);Xe(q,y,c),q._x_refreshXForScope=N=>{Object.entries(N).forEach(([j,X])=>{y[j]=X})},F(()=>{A.after(q),le(()=>oe(q))()}),typeof L=="object"&&Z("x-for key cannot be an object, it must be a string or an integer",c),h[L]=q}for(let g=0;g<x.length;g++)h[x[g]]._x_refreshXForScope(p[_.indexOf(x[g])]);c._x_prevKeys=_})}function Dl(e){let t=/,([^,\}\]]*)(?:,([^,\}\]]*))?$/,n=/^\s*\(|\)\s*$/g,i=/([\s\S]*?)\s+(?:in|of)\s+([\s\S]*)/,a=e.match(i);if(!a)return;let c={};c.items=a[2].trim();let u=a[1].replace(n,"").trim(),h=u.match(t);return h?(c.item=u.replace(t,"").trim(),c.index=h[1].trim(),h[2]&&(c.collection=h[2].trim())):c.item=u,c}function hi(e,t,n,i){let a={};return/^\[.*\]$/.test(e.item)&&Array.isArray(t)?e.item.replace("[","").replace("]","").split(",").map(u=>u.trim()).forEach((u,h)=>{a[u]=t[h]}):/^\{.*\}$/.test(e.item)&&!Array.isArray(t)&&typeof t=="object"?e.item.replace("{","").replace("}","").split(",").map(u=>u.trim()).forEach(u=>{a[u]=t[u]}):a[e.item]=t,e.index&&(a[e.index]=n),e.collection&&(a[e.collection]=i),a}function Bl(e){return!Array.isArray(e)&&!isNaN(e)}function Ds(){}Ds.inline=(e,{expression:t},{cleanup:n})=>{let i=ht(e);i._x_refs||(i._x_refs={}),i._x_refs[t]=e,n(()=>delete i._x_refs[t])};H("ref",Ds);H("if",(e,{expression:t},{effect:n,cleanup:i})=>{e.tagName.toLowerCase()!=="template"&&Z("x-if can only be used on a <template> tag",e);let a=J(e,t),c=()=>{if(e._x_currentIfEl)return e._x_currentIfEl;let h=e.content.cloneNode(!0).firstElementChild;return Xe(h,{},e),F(()=>{e.after(h),le(()=>oe(h))()}),e._x_currentIfEl=h,e._x_undoIf=()=>{F(()=>{Le(h),h.remove()}),delete e._x_currentIfEl},h},u=()=>{e._x_undoIf&&(e._x_undoIf(),delete e._x_undoIf)};n(()=>a(h=>{h?c():u()})),i(()=>e._x_undoIf&&e._x_undoIf())});H("id",(e,{expression:t},{evaluate:n})=>{n(t).forEach(a=>El(e,a))});ft((e,t)=>{e._x_ids&&(t._x_ids=e._x_ids)});qn(Ki("@",Vi(Oe("on:"))));H("on",le((e,{value:t,modifiers:n,expression:i},{cleanup:a})=>{let c=i?J(e,i):()=>{};e.tagName.toLowerCase()==="template"&&(e._x_forwardEvents||(e._x_forwardEvents=[]),e._x_forwardEvents.includes(t)||e._x_forwardEvents.push(t));let u=Cn(e,t,n,h=>{c(()=>{},{scope:{$event:h},params:[h]})});a(()=>u())}));vt("Collapse","collapse","collapse");vt("Intersect","intersect","intersect");vt("Focus","trap","focus");vt("Mask","mask","mask");function vt(e,t,n){H(t,i=>Z(`You can't use [x-${t}] without first installing the "${e}" plugin here: https://alpinejs.dev/plugins/${n}`,i))}Ie.setEvaluator(Hi);Ie.setRawEvaluator(Zc);Ie.setReactivityEngine({reactive:Jn,effect:Qu,release:Yu,raw:D});var Fl=Ie,Bs=Fl;let Y=null;function Fs(e){const t=document.querySelector('meta[name="user-id"]');return t&&parseInt(t.getAttribute("content")),{newMessage:"",selectedFile:null,typing:!1,expertOnline:!1,typingTimer:null,localTrack:null,isVideo:!1,inCall:!1,callState:"idle",videoEnabled:!0,isMuted:!1,async initiateCall(n){if(this.inCall){console.log("Already in call, ignoring");return}this.isVideo=n,this.inCall=!0,this.callState="ringing",console.log("User initiating call",{withVideo:n,chatId:e});const i=document.getElementById("callModal");this.callBootstrapModal=bootstrap.Modal.getOrCreateInstance(i),this.callBootstrapModal.show(),this.playRingtone(),console.log("Sending incoming-call whisper to expert"),window.Echo.private(`chat.${e}`).whisper("incoming-call",{from:"user",type:n?"video":"voice"})},playRingtone(){const n=document.getElementById("ringtone");n&&(n.currentTime=0,n.play().catch(i=>console.log("Autoplay blocked")))},stopRingtone(){const n=document.getElementById("ringtone");n&&(n.pause(),n.currentTime=0)},setupCallUI(n){console.log("Setting up Call UI..."),n.participants.forEach(i=>{this.attachParticipant(i)}),n.on("participantConnected",i=>{this.attachParticipant(i)}),n.on("participantDisconnected",i=>{i.tracks.forEach(a=>{a.track&&a.track.detach().forEach(c=>c.remove())})}),n.on("disconnected",()=>{this.endCall()})},cancelCall(){this.stopRingtone(),window.Echo.private(`chat.${e}`).whisper("call-cancelled",{chatId:e}),this.endCall()},endCall(){Y&&(Y.disconnect(),Y=null),this.callState="idle",this.inCall=!1,document.getElementById("local-media").innerHTML="",document.getElementById("remote-media").innerHTML="";const n=bootstrap.Modal.getInstance(document.getElementById("callModal"));n&&n.hide()},toggleMute(){this.isMuted=!this.isMuted,Y&&Y.localParticipant.audioTracks.forEach(n=>{n.track&&n.track.enable(!this.isMuted)})},toggleVideo(){this.videoEnabled=!this.videoEnabled,Y&&Y.localParticipant.videoTracks.forEach(n=>{n.track&&n.track.enable(this.videoEnabled)})},hangUp(){this.endCall(),window.Echo.private(`chat.${e}`).whisper("call-ended",{chatId:e})},init(){this.scrollToBottom(),this.markAllAsRead(),window.Echo.private(`chat.${e}`).listen("ChatMessageSent",n=>{n.message.sender_type!=="user"&&(this.appendMessage(n.message),this.markAsRead(n.message.id))}).listenForWhisper("call-accepted",async()=>{if(!Y){console.log("User joining room after accept"),this.stopRingtone(),this.callState="connected";try{const n=await axios.post(`/chat/${e}/generate-token`),i=await Twilio.Video.connect(n.data.token,{name:"chat_room_"+e,audio:!0,video:this.isVideo?{width:640}:!1});Y=i,this.setupCallUI(i),document.getElementById("video-wrapper").classList.remove("d-none"),document.getElementById("call-status").textContent="Connected"}catch(n){console.error("User join failed:",n),alert("Call connection failed."),this.endCall()}}}).listenForWhisper("call-rejected",()=>{this.stopRingtone(),this.endCall(),toastr.info("Call rejected")}).listenForWhisper("call-cancelled",()=>{this.stopRingtone(),this.endCall(),toastr.info("Call cancelled")}).listen("MessageRead",n=>{this.updateTicksToRead(n.messageId)}).listenForWhisper("typing",n=>{n.role==="expert"&&(this.typing=!0,clearTimeout(this.typingTimer),this.typingTimer=setTimeout(()=>this.typing=!1,1500))}),this.checkExpertOnline(),setInterval(()=>this.checkExpertOnline(),1e4)},checkExpertOnline(){axios.get(`/chat/${e}/experts-online`).then(n=>this.expertOnline=n.data.expertOnline).catch(()=>this.expertOnline=!1)},appendMessage(n){if(n.id&&document.querySelector(`[data-message-id="${n.id}"]`))return;const i=document.getElementById("messages"),a=document.createElement("div");n.id&&a.setAttribute("data-message-id",n.id),a.className=`message-container ${n.sender_type==="user"?"user-side":""}`;const c=n.message&&(n.message.endsWith(".jpg")||n.message.endsWith(".png")||n.message.endsWith(".jpeg")||n.message.startsWith("chat-images/"));let u=n.message?n.message.replace(/\n/g,"<br>"):"";c&&(u=`<img src="/storage/${n.message}" class="chat-img-preview" style="max-width:200px; border-radius:10px;">`);let h="";n.sender_type==="user"&&(h=n.is_read?'<span class="read-ticks" style="color: #34b7f1; margin-left: 4px;"></span>':'<span class="read-ticks" style="margin-left: 4px;"></span>');let d=`
                ${n.sender_type!=="user"?'<img src="/assets/front-end/img/placeholder/user.png" class="message-avatar">':""}
                <div class="message-bubble ${n.sender_type==="user"?"user":"bot"}">
                    ${u}
                    <div class="message-meta">
                        <span>${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}</span>
                        ${h}
                    </div>
                </div>
                ${n.sender_type==="user"?`<img src="${window.AUTH_USER_AVATAR}" class="message-avatar">`:""}
            `;a.innerHTML=d,i.appendChild(a),this.scrollToBottom()},scrollToBottom(){const n=document.querySelector(".chat-body");n&&(n.scrollTop=n.scrollHeight)},handleFileUpload(n){this.selectedFile=n.target.files[0],this.selectedFile&&this.sendMessage()},markAllAsRead(){axios.post("/chat/mark-read",{chat_id:e})},markAsRead(n){axios.post("/chat/mark-specific-read",{message_id:n})},updateTicksToRead(n){if(n){const i=document.querySelector(`[data-message-id="${n}"]`);if(i){const a=i.querySelector(".read-ticks");a&&(a.innerText="",a.style.color="#34b7f1")}}else document.querySelectorAll(".read-ticks").forEach(i=>{i.innerText="",i.style.color="#34b7f1"})},sendMessage(){const n=this.newMessage.trim();if(!n&&!this.selectedFile)return;let i=new FormData;i.append("chat_id",e),n&&i.append("message",n),this.selectedFile&&i.append("image",this.selectedFile),axios.post("/chat/send-message",i,{headers:{"Content-Type":"multipart/form-data"}}).then(a=>{this.newMessage="",this.selectedFile=null,document.getElementById("imageInput").value="",this.appendMessage(a.data.message_data)}).catch(a=>console.error(a))},typingEvent(){window.Echo.private(`chat.${e}`).whisper("typing",{role:"user"})},markAsRead(n){axios.post("/chat/mark-read",{message_id:n})}}}function $l(e){return console.log("Expert Chat ID:",e,typeof e),{newMessage:"",selectedFile:null,customerTyping:!1,customerOnline:!1,typingTimer:null,chatEnded:!1,isVideo:!1,isIncoming:!1,isMuted:!1,cameraOff:!1,callerInfo:null,callStatusText:"",callState:"",videoEnabled:!1,async initiateCall(t){if(this.activeRoom){alert("Already in a call!");return}this.isVideo=t;try{const i=(await axios.post(`/chat/${e}/generate-token`)).data.token,a=await Twilio.Video.connect(i,{name:"chat_room_"+e,audio:!0,video:t?{width:640}:!1});this.activeRoom=a;const c=(h,d)=>{if(h&&h.track){const p=h.track.attach(),_=document.getElementById(d);_&&_.appendChild(p)}};a.localParticipant.videoTracks.forEach(h=>{c(h,"local-media")});const u=h=>{h.videoTracks.forEach(d=>{d.isSubscribed?c(d,"remote-media"):d.on("subscribed",p=>{c({track:p},"remote-media")})}),h.on("trackSubscribed",d=>{if(d.kind==="video"){const p=d.attach();document.getElementById("remote-media").appendChild(p)}})};a.participants.forEach(u),a.on("participantConnected",u),a.on("participantDisconnected",h=>{h.tracks.forEach(d=>{d.track&&d.track.detach().forEach(p=>p.remove())})}),document.getElementById("call-modal").classList.remove("hidden")}catch(n){console.error("Call failed:",n),alert("Call failed: "+(n.message||"Permission/Connection issue"))}},participantConnected(t){t.tracks.forEach(n=>{n.isSubscribed&&n.track&&document.getElementById("remote-media").appendChild(n.track.attach())}),t.on("trackSubscribed",n=>{document.getElementById("remote-media").appendChild(n.attach())})},hangUp(){window.Echo.private(`chat.${e}`).whisper("call-ended",{chatId:e}),this.resetCallUI()},init(){this.scrollToBottom(),this.markAllAsRead(),window.Echo.private(`chat.${e}`).listen("ChatMessageSent",t=>{t.message.sender_type==="user"&&(this.appendMessage(t.message),this.markAsRead(t.message.id))}).listen("MessageRead",t=>{this.updateTicksToRead(t.messageId)}).listenForWhisper("typing",t=>{t.role==="user"&&(this.customerTyping=!0,clearTimeout(this.typingTimer),this.typingTimer=setTimeout(()=>this.customerTyping=!1,2e3))}).listenForWhisper("incoming-call",t=>{console.log("Incoming call data:",t),this.isIncoming=!0,this.isVideo=t.type==="video",this.callState="incoming",this.callStatusText="Incoming "+(this.isVideo?"Video":"Voice")+" Call",this.callerInfo={avatar:t.avatar??"/assets/back-end/img/placeholder/user.png",name:t.name??"Customer"},$("#callModal").modal({backdrop:"static",keyboard:!1}),$("#callModal").modal("show")}).listenForWhisper("call-accepted",async()=>{if(this.activeRoom)return;const n=(await axios.post(`/chat/${e}/generate-token`)).data.token;Y=await Twilio.Video.connect(n,{name:"chat_room_"+e,audio:!0,video:this.isVideo?{width:640}:!1}),this.setupCallUI(Y)})},sendMessage(){if(!this.newMessage.trim()&&!this.selectedFile)return;let t=new FormData;t.append("chat_id",e),this.newMessage&&t.append("message",this.newMessage),this.selectedFile&&t.append("image",this.selectedFile),axios.post("/expert/chat/send-message",t).then(n=>{this.newMessage="",this.selectedFile=null,this.appendMessage(n.data.message_data)})},acceptCall(){console.log("Expert accepting call"),this.callState="connected",window.Echo.private(`chat.${e}`).whisper("call-accepted"),axios.post(`/chat/${e}/generate-token`).then(async t=>{console.log("Expert token received");try{const n=await Twilio.Video.connect(t.data.token,{name:"chat_room_"+e,audio:!0,video:this.isVideo?{width:640}:!1});Y=n,console.log("Expert joined room successfully"),this.setupCallUI(n),document.getElementById("video-wrapper").classList.remove("d-none"),document.getElementById("call-status").textContent="Connected"}catch(n){console.error("Twilio connect failed:",n),alert("Unable to connect. Please check camera/mic permissions."),this.endCall()}}).catch(t=>{console.error("Token fetch failed:",t),alert("Failed to get connection token.")})},setupCallUI(t){console.log("Setting up Call UI..."),t.participants.forEach(n=>{this.attachParticipant(n)}),t.on("participantConnected",n=>{this.attachParticipant(n)}),t.on("participantDisconnected",n=>{n.tracks.forEach(i=>{i.track&&i.track.detach().forEach(a=>a.remove())})}),t.on("disconnected",()=>{this.endCall()})},resetCallUI(){this.activeRoom&&(this.activeRoom.disconnect(),this.activeRoom=null),this.callState="",this.isIncoming=!1,this.isVideo=!1,$("#callModal").modal("hide"),document.getElementById("local-media").innerHTML="",document.getElementById("remote-media").innerHTML=""},rejectCall(){window.Echo.private(`chat.${e}`).whisper("call-rejected",{chatId:e}),this.resetCallUI()},toggleMute(){this.isMuted=!this.isMuted,this.activeRoom&&this.activeRoom.localParticipant.audioTracks.forEach(t=>{t.track&&t.track.enable(!this.isMuted)})},toggleVideo(){this.videoEnabled=!this.videoEnabled,this.activeRoom&&this.activeRoom.localParticipant.videoTracks.forEach(t=>{t.track&&t.track.enable(this.videoEnabled)})},typingEvent(){window.Echo.private(`chat.${e}`).whisper("typing",{role:"expert"})},appendMessage(t){if(t.id&&document.querySelector(`[data-message-id="${t.id}"]`))return;const n=document.getElementById("messages"),i=document.createElement("div");t.id&&i.setAttribute("data-message-id",t.id),i.className=`message-container ${t.sender_type==="expert"?"user-side":""}`;let a=t.message;t.message&&t.message.startsWith("chat-images/")&&(a=`<img src="/storage/${t.message}" style="max-width:200px; border-radius:10px;">`);let c="";t.sender_type==="expert"&&(c=t.is_read?'<span class="read-ticks" style="color: #fff; margin-left: 4px;"></span>':'<span class="read-ticks" style="margin-left: 4px; opacity: 0.7;"></span>'),i.innerHTML=`
                <div class="message-bubble ${t.sender_type==="expert"?"user":"bot"}">
                    ${a}
                    <div class="message-meta">
                        <span>${new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}</span>
                        ${c}
                    </div>
                </div>
            `,n.appendChild(i),this.scrollToBottom()},hideFooterAndButton(){const t=document.querySelector(".chat-footer");t&&(t.style.display="none");const n=document.querySelector(".chat-header .btn-danger");n&&(n.style.display="none")},showEndedMessage(){const t=document.getElementById("messages");t&&!t.querySelector(".chat-ended-message")&&(t.insertAdjacentHTML("beforeend",`
                    <div class="text-center py-5 my-4 bg-light rounded chat-ended-message">
                        <h5 class="text-muted mb-3">Chat has ended</h5>
                        <p class="text-muted mb-0">This chat has been ended by the expert.</p>
                    </div>
                `),t.scrollTop=t.scrollHeight)},endChatByExpert(){Swal.fire({title:"End Chat?",text:"Are you sure you want to end this chat?",icon:"warning",showCancelButton:!0,confirmButtonText:"Yes, End Chat",confirmButtonColor:"#dc3545"}).then(t=>{t.isConfirmed&&fetch(`/expert/chat/${e}/end`,{method:"POST",headers:{"X-CSRF-TOKEN":document.querySelector('meta[name="csrf-token"]').getAttribute("content"),Accept:"application/json"}}).then(n=>n.json()).then(n=>{n.success?(toastr.success(n.message||"Chat ended successfully!"),this.chatEnded=!0,this.hideFooterAndButton(),this.showEndedMessage()):toastr.error(n.message||"Failed")}).catch(()=>toastr.error("Network error"))})},scrollToBottom(){const t=document.getElementById("messages");t&&(t.scrollTop=t.scrollHeight)},updateTicksToRead(t){if(t){const n=document.querySelector(`[data-message-id="${t}"] .read-ticks`);n&&(n.innerText="",n.style.color="#34b7f1")}else document.querySelectorAll(".read-ticks").forEach(n=>{n.innerText="",n.style.color="#34b7f1"})},markAllAsRead(){axios.post("/expert/chat/mark-read",{chat_id:e})},markAsRead(t){axios.post("/expert/chat/mark-specific-read",{message_id:t})},handleFileUpload(t){this.selectedFile=t.target.files[0],this.sendMessage()},markAsRead(t){axios.post("/expert/chat/mark-read",{chat_id:e})}}}function Ul(){return{newMessage:"",selectedFile:null,typing:!1,typingTimer:null,showSearchModal:!1,selectedExpertId:null,expertName:"",expertAvatar:"",currentChannel:null,searchQuery:"",searchResults:[],activeExperts:[],init(){console.log("[AdminChat] Component initialized"),this.activeExperts=window.INITIAL_EXPERTS||[],this.searchResults=window.ALL_EXPERTS,this.loadInitialMessages(),this.scrollToBottom(),this.markAllAsRead()},openChat(e,t,n){if(this.showSearchModal=!1,this.activeExperts.find(c=>c.id===e)||this.activeExperts.unshift({id:e,name:t,avatar:n,specialty:"Expert",unread_count:0}),this.selectedExpertId===e)return;this.selectedExpertId=e,this.expertName=t,this.expertAvatar=n;const a=document.getElementById("messages");a&&(a.innerHTML=""),this.currentChannel&&window.Echo.leave(this.currentChannel),this.currentChannel=`admin-chat.${e}`,window.Echo.private(this.currentChannel).listen("AdminExpertMessageSent",c=>{this.appendMessage(c.message),c.message.sender_type==="expert"&&this.markAsRead(c.message.id)}).listenForWhisper("typing",c=>{c.role==="expert"&&(this.typing=!0,clearTimeout(this.typingTimer),this.typingTimer=setTimeout(()=>this.typing=!1,1500))}),this.loadInitialMessages(e),this.markAllAsRead()},selectExpertForChat(e,t,n){this.openChat(e,t,n),this.searchQuery="",this.searchResults=[]},appendMessage(e){if(console.log("[AdminChat] appendMessage called with:",e),!e||!e.id){console.warn("[AdminChat] Invalid message object, skipping append");return}if(document.querySelector(`[data-message-id="${e.id}"]`)){console.log("[AdminChat] Message already exists, skipping:",e.id);return}const t=document.getElementById("messages");if(!t){console.error("[AdminChat] #messages div not found!");return}const n=document.createElement("div");n.setAttribute("data-message-id",e.id);const i=e.sender_type==="admin";n.className=`message-container ${i?"user-side":""}`;let a="";e.image_path?a=`<img src="/storage/${e.image_path}" class="chat-img-preview" style="max-width:200px; border-radius:10px;">`:a=e.message?e.message.replace(/\n/g,"<br>"):"";let c="";i&&(c=e.is_read?'<span class="read-ticks" style="color: #34b7f1;"></span>':'<span class="read-ticks"></span>');const u=new Date(e.sent_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"});n.innerHTML=`
                ${i?"":'<img src="'+this.expertAvatar+'" class="message-avatar" alt="Expert">'}
                <div class="message-bubble ${i?"user":"bot"}">
                    ${a}
                    <div class="message-meta">
                        <span>${u}</span>
                        ${c}
                    </div>
                </div>
                ${i?'<img src="'+window.ADMIN_AVATAR+'" class="message-avatar" alt="Admin">':""}
            `,t.appendChild(n),console.log("[AdminChat]  Message appended to DOM:",e.id),this.scrollToBottom()},loadInitialMessages(e){if(!e){console.warn("[AdminChat] loadInitialMessages: expertId missing");return}console.log("[AdminChat] Fetching initial messages for expert:",e),axios.get(`/admin/expert-chat/messages/${e}`).then(t=>{console.log("[AdminChat] Initial messages loaded:",t.data.messages.length,"messages"),t.data.messages.forEach(n=>this.appendMessage(n)),this.scrollToBottom()}).catch(t=>{console.error("[AdminChat] Failed to load initial messages:",t.response||t)})},scrollToBottom(){const e=document.querySelector(".chat-body");e&&(e.scrollTop=e.scrollHeight)},sendMessage(){if(!this.newMessage.trim()&&!this.selectedFile)return;if(!this.selectedExpertId){console.warn("[AdminChat] Cannot send: no expert selected");return}console.log("[AdminChat] Sending message to expert:",this.selectedExpertId);let e=new FormData;e.append("expert_id",this.selectedExpertId),this.newMessage&&e.append("message",this.newMessage),this.selectedFile&&e.append("image",this.selectedFile),axios.post("/admin/expert-chat/send",e,{headers:{"Content-Type":"multipart/form-data"}}).then(t=>{console.log("[AdminChat] Message sent successfully:",t.data),this.newMessage="",this.selectedFile=null,document.getElementById("imageInput").value="",this.appendMessage(t.data.message_data)}).catch(t=>{console.error("[AdminChat] Send failed:",t.response||t)})},typingEvent(){this.selectedExpertId&&(console.log("[AdminChat] Typing whisper sent to:",`admin-chat.${this.selectedExpertId}`),window.Echo.private(`admin-chat.${this.selectedExpertId}`).whisper("typing",{role:"admin"}))},handleFileUpload(e){this.selectedFile=e.target.files[0],this.selectedFile&&this.sendMessage()},markAllAsRead(){this.selectedExpertId&&axios.post("/admin/expert-chat/mark-read",{expert_id:this.selectedExpertId})},markAsRead(e){axios.post("/admin/expert-chat/mark-specific-read",{message_id:e})},async searchExperts(){if(!this.searchQuery.trim()){this.searchResults=window.ALL_EXPERTS;return}try{const e=this.searchQuery.toLowerCase();this.searchResults=window.ALL_EXPERTS.filter(t=>t.name.toLowerCase().includes(e)||t.specialty.toLowerCase().includes(e))}catch(e){console.error("Search error:",e),this.searchResults=[]}},selectExpertForChat(e,t,n){this.openChat(e,t,n)}}}function Hl(){const e=window.EXPERT_ID;return!e||e==="null"?(console.error("Expert ID missing!"),{}):{newMessage:"",selectedFile:null,typing:!1,typingTimer:null,init(){this.loadInitialMessages(),this.scrollToBottom(),this.markAllAsRead(),window.Echo.private(`admin-chat.${e}`).listen("AdminExpertMessageSent",t=>{this.appendMessage(t.message),t.message.sender_type==="admin"&&this.markAsRead(t.message.id)}).listenForWhisper("typing",t=>{t.role==="admin"&&(this.typing=!0,clearTimeout(this.typingTimer),this.typingTimer=setTimeout(()=>this.typing=!1,2e3))})},loadInitialMessages(){axios.get("/expert/admin-chat/messages").then(t=>{t.data.messages.forEach(n=>this.appendMessage(n)),this.scrollToBottom()})},appendMessage(t){if(t.id&&document.querySelector(`[data-message-id="${t.id}"]`))return;const n=document.getElementById("messages"),i=document.createElement("div");i.setAttribute("data-message-id",t.id);const a=t.sender_type==="expert";i.className=`message-container ${a?"user-side":""}`;let c=t.image_path?`<img src="/storage/${t.image_path}" class="chat-img-preview" style="max-width:200px; border-radius:10px;">`:t.message?t.message.replace(/\n/g,"<br>"):"",u="";a&&(u=t.is_read?'<span class="read-ticks" style="color: #34b7f1;"></span>':'<span class="read-ticks"></span>'),i.innerHTML=`
                ${a?"":'<img src="/assets/admin-avatar.jpg" class="message-avatar">'}
                <div class="message-bubble ${a?"user":"bot"}">
                    ${c}
                    <div class="message-meta">
                        <span>${new Date(t.sent_at).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}</span>
                        ${u}
                    </div>
                </div>
                ${a?'<img src="'+window.EXPERT_AVATAR+'" class="message-avatar">':""}
            `,n.appendChild(i),this.scrollToBottom()},scrollToBottom(){const t=document.querySelector(".chat-body");t&&(t.scrollTop=t.scrollHeight)},sendMessage(){if(!this.newMessage.trim()&&!this.selectedFile)return;let t=new FormData;this.newMessage&&t.append("message",this.newMessage),this.selectedFile&&t.append("image",this.selectedFile),axios.post("/expert/massages/admin-chat/send",t).then(n=>{this.newMessage="",this.selectedFile=null,document.getElementById("imageInput").value="",this.appendMessage(n.data.message_data)})},typingEvent(){window.Echo.private(`admin-chat.${e}`).whisper("typing",{role:"expert"})},handleFileUpload(t){this.selectedFile=t.target.files[0],this.selectedFile&&this.sendMessage()},markAllAsRead(){axios.post("/expert/admin-chat/mark-read")},markAsRead(t){axios.post("/expert/admin-chat/mark-specific-read",{message_id:t})}}}document.addEventListener("alpine:init",()=>{window.chatComponent=Fs,window.expertChatComponent=$l,window.expertAdminChatComponent=Hl,Alpine.data("adminExpertChatComponent",Ul)});window.Alpine=Bs;window.chatComponent=Fs;Bs.start();
